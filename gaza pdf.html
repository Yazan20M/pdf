<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gaza PDF - منصة غزة لمعالجة ملفات PDF</title>
    <meta name="description" content="منصة غزة لمعالجة ملفات PDF - أدوات احترافية مجانية لدعم غزة. دمج، تقسيم، ضغط، وتحويل ملفات PDF بسهولة. 100% من الأرباح لغزة.">
    <meta name="keywords" content="غزة PDF, أدوات PDF, معالجة PDF, دعم غزة, دعم فلسطين, كريبتو, USDT, Bitcoin">
    <meta name="author" content="Gaza PDF Team">
    <meta property="og:title" content="Gaza PDF - منصة غزة لمعالجة ملفات PDF">
    <meta property="og:description" content="أدوات احترافية مجانية لمعالجة PDF - 100% من الأرباح لدعم غزة">
    <meta property="og:image" content="https://gazapdf.com/images/og-image.jpg">
    <meta property="og:url" content="https://gazapdf.com">
    <meta name="twitter:card" content="summary_large_image">
    <link rel="canonical" href="https://gazapdf.com">
    <link rel="alternate" hreflang="ar" href="https://gazapdf.com/ar">
    <link rel="alternate" hreflang="en" href="https://gazapdf.com/en">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.6.0/mammoth.browser.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;family=Roboto:wght@300;400;500;700&display=swap');
        
        body {
            font-family: 'Tajawal', sans-serif;
        }
        
        body.en {
            font-family: 'Roboto', sans-serif;
        }
        
        .hero-gradient {
            background: linear-gradient(135deg, #1a472a 0%, #2d5a3d 50%, #0f2818 100%);
        }
        
        .gaza-green {
            background-color: #1a472a;
        }
        
        .gaza-light-green {
            background-color: #2d5a3d;
        }
        
        .gaza-accent {
            background-color: #4a7c59;
        }
        
        .tool-card {
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .tool-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(26, 71, 42, 0.2);
            border-color: #4a7c59;
        }
        
        .drop-zone {
            transition: all 0.3s ease;
            border: 3px dashed #1a472a;
        }
        
        .drop-zone.dragover {
            background-color: #f0fdf4;
            border-color: #4a7c59;
        }
        
        .file-item {
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        .progress-bar {
            transition: width 0.3s ease;
            background-color: #1a472a;
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #1a472a;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            overflow-y: auto;
        }
        
        .modal-content {
            background-color: #fefefe;
            margin: 2% auto;
            padding: 20px;
            border: none;
            width: 90%;
            max-width: 900px;
            border-radius: 10px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
        }
        
        .close {
            color: #aaa;
            float: left;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        
        .close:hover {
            color: #1a472a;
        }
        
        .gaza-card {
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
            border: 2px solid #4a7c59;
        }
        
        .crypto-donate {
            background: linear-gradient(135deg, #1a472a 0%, #2d5a3d 100%);
            transition: all 0.3s ease;
        }
        
        .crypto-donate:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(26, 71, 42, 0.3);
        }
        
        .timeline-item {
            position: relative;
            padding-right: 40px;
        }
        
        .timeline-item::before {
            content: '';
            position: absolute;
            right: 0;
            top: 0;
            width: 2px;
            height: 100%;
            background: #1a472a;
        }
        
        .timeline-dot {
            position: absolute;
            right: -6px;
            top: 5px;
            width: 14px;
            height: 14px;
            background: #1a472a;
            border-radius: 50%;
            border: 3px solid white;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #f0fdf4 0%, #bbf7d0 100%);
            transition: all 0.3s ease;
            border: 1px solid #4a7c59;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(26, 71, 42, 0.2);
        }
        
        /* Language switcher styles */
        .lang-switcher {
            position: relative;
        }
        
        .lang-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            display: none;
            z-index: 100;
        }
        
        .lang-dropdown.show {
            display: block;
        }
        
        .lang-option {
            padding: 8px 16px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .lang-option:hover {
            background-color: #f3f4f6;
        }
        
        .lang-option.active {
            background-color: #1a472a;
            color: white;
        }
        
        .crypto-address {
            font-family: 'Courier New', monospace;
            background: #f3f4f6;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 14px;
            word-break: break-all;
            border: 1px solid #e5e7eb;
        }
        
        .profit-badge {
            animation: pulse 2s infinite;
            color: #dc2626;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .btn-primary {
            background-color: #1a472a;
            color: white;
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            background-color: #2d5a3d;
            transform: translateY(-1px);
        }
        
        .text-gaza {
            color: #1a472a;
        }
        
        .bg-gaza {
            background-color: #1a472a;
        }
        
        .border-gaza {
            border-color: #1a472a;
        }
        
        .footer-bg {
            background-color: #0f2818;
        }
        
        .contact-card {
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
            border: 2px solid #4a7c59;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .contact-info {
            display: flex;
            align-items: center;
            margin: 10px 0;
            font-size: 16px;
            color: #1a472a;
        }
        
        .contact-info i {
            margin-left: 10px;
            color: #4a7c59;
            font-size: 20px;
            width: 24px;
        }
        
        .edit-pdf-container {
            background: #f9fafb;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .edit-toolbar {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .edit-tool-btn {
            padding: 8px 16px;
            background: #1a472a;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .edit-tool-btn:hover {
            background: #2d5a3d;
        }
        
        .edit-tool-btn.active {
            background: #4a7c59;
        }
        
        .pdf-preview {
            border: 1px solid #e5e7eb;
            border-radius: 4px;
            min-height: 400px;
            background: white;
            position: relative;
            overflow: auto;
        }
        
        .text-editor {
            width: 100%;
            min-height: 200px;
            border: 1px solid #e5e7eb;
            border-radius: 4px;
            padding: 10px;
            font-family: Arial, sans-serif;
            font-size: 14px;
            resize: vertical;
        }
        
        .color-picker {
            width: 40px;
            height: 40px;
            border: 1px solid #e5e7eb;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .font-size-selector {
            padding: 8px;
            border: 1px solid #e5e7eb;
            border-radius: 4px;
            background: white;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="bg-white shadow-sm sticky top-0 z-50 border-b border-gaza">
        <div class="container mx-auto px-4">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center">
                    <div class="flex items-center">
                        <div class="w-10 h-10 bg-gaza rounded-lg flex items-center justify-center ml-3">
                            <span class="text-white font-bold text-lg">GP</span>
                        </div>
                        <div>
                            <h1 class="text-2xl font-bold text-gaza" data-translate="siteName">غزة PDF</h1>
                            <p class="text-xs profit-badge" data-translate="profitGaza">100% للأرباح لغزة</p>
                        </div>
                    </div>
                </div>
                
                <nav class="hidden md:flex items-center space-x-reverse space-x-6">
                    <a href="#" onclick="showModal('about')" class="text-gray-600 hover:text-gaza transition" data-translate="navAbout">عن الموقع</a>
                    <a href="#" onclick="showModal('support')" class="text-gray-600 hover:text-gaza transition" data-translate="navSupport">الدعم</a>
                    <a href="#gaza-section" class="text-gray-600 hover:text-gaza transition" data-translate="navGaza">عن غزة</a>
                    <a href="#contact-section" class="text-gray-600 hover:text-gaza transition" data-translate="navContact">تواصل معنا</a>
                </nav>
                
                <div class="flex items-center space-x-reverse space-x-4">
                    <div class="lang-switcher">
                        <button onclick="toggleLangDropdown()" class="text-gray-600 hover:text-gaza transition flex items-center">
                            <i class="fas fa-globe text-xl ml-2"></i>
                            <span id="currentLang">العربية</span>
                            <i class="fas fa-chevron-down text-sm mr-1"></i>
                        </button>
                        <div id="langDropdown" class="lang-dropdown">
                            <div class="lang-option active" onclick="changeLanguage('ar')">العربية</div>
                            <div class="lang-option" onclick="changeLanguage('en')">English</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>
    
    <!-- Hero Section -->
    <section class="hero-gradient py-16">
        <div class="container mx-auto px-4 text-center">
            <h2 class="text-4xl md:text-5xl font-bold text-white mb-4" data-translate="heroTitle">
                منصة غزة لمعالجة ملفات PDF
            </h2>
            <p class="text-xl text-green-100 mb-8" data-translate="heroSubtitle">
                أدوات احترافية مجانية لمعالجة ملفات PDF - دمج، تقسيم، ضغط، وتحويل
            </p>
            <div class="flex justify-center space-x-reverse space-x-4 mb-8">
                <div class="bg-white bg-opacity-20 backdrop-blur-sm rounded-lg px-4 py-2">
                    <span class="text-white font-semibold" data-translate="profit100">100% من الأرباح لدعم غزة</span>
                </div>
                <div class="bg-white bg-opacity-20 backdrop-blur-sm rounded-lg px-4 py-2">
                    <span class="text-white font-semibold" data-translate="freeForever">مجاني للأبد</span>
                </div>
            </div>
            <div class="flex justify-center space-x-reverse space-x-4">
                <a href="#tools" class="bg-white text-gaza px-6 py-3 rounded-lg hover:bg-green-50 transition font-semibold">
                    <i class="fas fa-tools ml-2"></i>
                    <span data-translate="startNow">ابدأ الآن</span>
                </a>
                <a href="#donate-section" class="bg-transparent border-2 border-white text-white px-6 py-3 rounded-lg hover:bg-white hover:text-gaza transition font-semibold">
                    <i class="fas fa-hand-holding-heart ml-2"></i>
                    <span data-translate="donateNow">تبرع الآن</span>
                </a>
            </div>
        </div>
    </section>
    
    <!-- Gaza Section -->
    <section id="gaza-section" class="py-16 bg-gray-50">
        <div class="container mx-auto px-4">
            <div class="text-center mb-12">
                <h2 class="text-4xl font-bold text-gaza mb-4" data-translate="gazaTitle">غزة.. أرض الصمود والعزة</h2>
                <p class="text-lg text-gray-600 max-w-4xl mx-auto" data-translate="gazaSubtitle">
                    من قلب غزة، نقدم لكم هذه المنصة كدعم لأهلنا في غزة. كل استخدام للموقع هو مساهمة مباشرة في دعم صمود أهلنا في غزة.
                </p>
            </div>
            
            <!-- Gaza Statistics -->
            <div class="grid md:grid-cols-4 gap-6 mb-12">
                <div class="stat-card p-6 rounded-lg text-center">
                    <div class="text-4xl font-bold text-gaza mb-2">5000+</div>
                    <p class="text-gray-700 font-medium" data-translate="gazaHistoryYears">سنة من التاريخ</p>
                </div>
                <div class="stat-card p-6 rounded-lg text-center">
                    <div class="text-4xl font-bold text-gaza mb-2">2M+</div>
                    <p class="text-gray-700 font-medium" data-translate="gazaPopulation">نسمة من الصامدين</p>
                </div>
                <div class="stat-card p-6 rounded-lg text-center">
                    <div class="text-4xl font-bold text-gaza mb-2">365</div>
                    <p class="text-gray-700 font-medium" data-translate="gazaSiegeDays">يوم من الحصار</p>
                </div>
                <div class="stat-card p-6 rounded-lg text-center">
                    <div class="text-4xl font-bold text-gaza mb-2">∞</div>
                    <p class="text-gray-700 font-medium" data-translate="gazaHope">أمل لا ينتهي</p>
                </div>
            </div>
            
            <!-- Gaza Timeline -->
            <div class="bg-white rounded-lg shadow-lg p-8 mb-12">
                <h3 class="text-2xl font-bold text-gaza mb-8 text-center" data-translate="gazaTimeline">رحلة غزة عبر التاريخ</h3>
                <div class="space-y-8">
                    <div class="timeline-item">
                        <div class="timeline-dot"></div>
                        <div class="gaza-card p-4 rounded-lg">
                            <h4 class="font-bold text-gaza mb-2" data-translate="ancientGaza">غزة القديمة (3000 ق.م)</h4>
                            <p class="text-gray-700" data-translate="ancientGazaDesc">أحد أقدم المدن المأهولة في العالم، مركز تجاري هام على طريق البحر المتوسط.</p>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-dot"></div>
                        <div class="gaza-card p-4 rounded-lg">
                            <h4 class="font-bold text-gaza mb-2" data-translate="islamicGaza">غزة الإسلامية (637 م)</h4>
                            <p class="text-gray-700" data-translate="islamicGazaDesc">فتحت في عهد عمر بن الخطاب، أصبحت مركزاً علمياً وثقافياً مهماً.</p>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-dot"></div>
                        <div class="gaza-card p-4 rounded-lg">
                            <h4 class="font-bold text-gaza mb-2" data-translate="modernGaza">غزة الحديثة (1948)</h4>
                            <p class="text-gray-700" data-translate="modernGazaDesc">أصبحت ملجأً للاجئين الفلسطينيين ورمزاً للنضال من أجل العودة.</p>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-dot"></div>
                        <div class="gaza-card p-4 rounded-lg">
                            <h4 class="font-bold text-gaza mb-2" data-translate="gazaToday">غزة اليوم (2024)</h4>
                            <p class="text-gray-700" data-translate="gazaTodayDesc">تواصل الصمود رغم الحصار والعدوان، تنتصر الحياة على الموت، والأمل على اليأس.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Contact Section -->
    <section id="contact-section" class="py-16 bg-white">
        <div class="container mx-auto px-4">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-gaza mb-4" data-translate="contactTitle">تواصل معنا</h2>
                <p class="text-lg text-gray-600" data-translate="contactSubtitle">نحن هنا من غزة لنستمع إليك وندعمك</p>
            </div>
            
            <div class="max-w-2xl mx-auto">
                <div class="contact-card">
                    <h3 class="text-xl font-bold text-gaza mb-4" data-translate="contactInfo">معلومات التواصل</h3>
                    <div class="contact-info">
                        <i class="fas fa-envelope"></i>
                        <span>البريد الإلكتروني: yazanalkord05@gmail.com</span>
                    </div>
                    <div class="contact-info">
                        <i class="fas fa-phone"></i>
                        <span>الهاتف: +970 594 850 560</span>
                    </div>
                    <div class="contact-info">
                        <i class="fas fa-map-marker-alt"></i>
                        <span>الموقع: غزة، فلسطين</span>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Donate Section -->
    <section id="donate-section" class="py-16 bg-gray-50">
        <div class="container mx-auto px-4">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-gaza mb-4" data-translate="donateTitle">ادعم غزة</h2>
                <p class="text-lg text-gray-600" data-translate="donateSubtitle">تبرعك يدعم صمود أهلنا في غزة</p>
            </div>
            
            <div class="max-w-4xl mx-auto">
                <div class="bg-white rounded-lg shadow-lg p-8">
                    <h3 class="text-2xl font-bold text-gaza mb-6 text-center" data-translate="cryptoDonationTitle">التبرع بالعملات الرقمية</h3>
                    
                    <div class="bg-green-50 border border-green-200 rounded-lg p-6 mb-6">
                        <h4 class="text-lg font-semibold text-green-800 mb-4" data-translate="whyCrypto">لماذا التبرع بالكريبتو؟</h4>
                        <ul class="space-y-2 text-gray-700">
                            <li class="flex items-start">
                                <i class="fas fa-check-circle text-green-500 mt-1 ml-2"></i>
                                <span data-translate="cryptoBenefit1">تحويلات سريعة وآمنة عبر الحدود</span>
                            </li>
                            <li class="flex items-start">
                                <i class="fas fa-check-circle text-green-500 mt-1 ml-2"></i>
                                <span data-translate="cryptoBenefit2">رسوم منخفضة مقارنة بالتحويلات التقليدية</span>
                            </li>
                            <li class="flex items-start">
                                <i class="fas fa-check-circle text-green-500 mt-1 ml-2"></i>
                                <span data-translate="cryptoBenefit3">وصول مباشر للمستفيدين بدون وسطاء</span>
                            </li>
                            <li class="flex items-start">
                                <i class="fas fa-check-circle text-green-500 mt-1 ml-2"></i>
                                <span data-translate="cryptoBenefit4">خصوصية عالية وأمان للمعاملات</span>
                            </li>
                        </ul>
                    </div>
                    
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="bg-gray-50 rounded-lg p-6">
                            <h4 class="text-lg font-semibold text-gaza mb-3 flex items-center">
                                <i class="fab fa-bitcoin text-orange-500 ml-2"></i>
                                <span data-translate="bitcoin">Bitcoin (BTC)</span>
                            </h4>
                            <p class="text-sm text-gray-600 mb-3" data-translate="bitcoinAddress">عنوان المحفظة:</p>
                            <div class="crypto-address mb-3">bc1q5c8cnefys6uu5ncdgkvylfpdnd6n4p0lpnv28h</div>
                            <div class="bg-gray-200 p-4 rounded text-center">
                                <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=bc1q5c8cnefys6uu5ncdgkvylfpdnd6n4p0lpnv28h" alt="Bitcoin QR" class="mx-auto">
                            </div>
                        </div>
                        
                        <div class="bg-gray-50 rounded-lg p-6">
                            <h4 class="text-lg font-semibold text-gaza mb-3 flex items-center">
                                <i class="fab fa-ethereum text-blue-500 ml-2"></i>
                                <span data-translate="usdt">USDT (ERC20)</span>
                            </h4>
                            <p class="text-sm text-gray-600 mb-3" data-translate="ethereumAddress">عنوان المحفظة:</p>
                            <div class="crypto-address mb-3">0xeed2da80a6af0bc744bcda6645ea3b894afd009a</div>
                            <div class="bg-gray-200 p-4 rounded text-center">
                                <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=0xeed2da80a6af0bc744bcda6645ea3b894afd009a" alt="USDT QR" class="mx-auto">
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                        <h4 class="font-semibold text-yellow-800 mb-2" data-translate="importantNote">ملاحظة هامة:</h4>
                        <p class="text-yellow-700 text-sm" data-translate="cryptoNote">
                            جميع التبرعات بالعملات الرقمية تذهب بالكامل لدعم أهالي غزة. نحن نستخدم محافظ آمنة ومشفرة لضمان وصول التبرعات لمستحقيها.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Tools Section -->
    <section id="tools" class="py-16 bg-white">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl font-bold text-center text-gaza mb-12" data-translate="toolsTitle">أدواتنا</h2>
            
            <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-6">
                <!-- Merge PDF -->
                <div class="tool-card bg-white rounded-lg p-6 text-center cursor-pointer" onclick="selectTool('merge')">
                    <div class="bg-green-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-object-group text-green-600 text-2xl"></i>
                    </div>
                    <h3 class="font-semibold text-gray-800 mb-2" data-translate="mergePdf">دمج PDF</h3>
                    <p class="text-sm text-gray-600" data-translate="mergePdfDesc">دمج ملفات PDF متعددة</p>
                </div>
                
                <!-- Split PDF -->
                <div class="tool-card bg-white rounded-lg p-6 text-center cursor-pointer" onclick="selectTool('split')">
                    <div class="bg-blue-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-cut text-blue-600 text-2xl"></i>
                    </div>
                    <h3 class="font-semibold text-gray-800 mb-2" data-translate="splitPdf">تقسيم PDF</h3>
                    <p class="text-sm text-gray-600" data-translate="splitPdfDesc">تقسيم ملف PDF إلى صفحات</p>
                </div>
                
                <!-- Compress PDF -->
                <div class="tool-card bg-white rounded-lg p-6 text-center cursor-pointer" onclick="selectTool('compress')">
                    <div class="bg-purple-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-compress text-purple-600 text-2xl"></i>
                    </div>
                    <h3 class="font-semibold text-gray-800 mb-2" data-translate="compressPdf">ضغط PDF</h3>
                    <p class="text-sm text-gray-600" data-translate="compressPdfDesc">تقليل حجم ملفات PDF</p>
                </div>
                
                <!-- Convert to PDF -->
                <div class="tool-card bg-white rounded-lg p-6 text-center cursor-pointer" onclick="selectTool('convert')">
                    <div class="bg-orange-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-exchange-alt text-orange-600 text-2xl"></i>
                    </div>
                    <h3 class="font-semibold text-gray-800 mb-2" data-translate="convertToPdf">تحويل إلى PDF</h3>
                    <p class="text-sm text-gray-600" data-translate="convertToPdfDesc">Word, Excel, JPG</p>
                </div>
                
                <!-- PDF to Word -->
                <div class="tool-card bg-white rounded-lg p-6 text-center cursor-pointer" onclick="selectTool('pdf2word')">
                    <div class="bg-indigo-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-file-word text-indigo-600 text-2xl"></i>
                    </div>
                    <h3 class="font-semibold text-gray-800 mb-2" data-translate="pdfToWord">PDF إلى Word</h3>
                    <p class="text-sm text-gray-600" data-translate="pdfToWordDesc">تحويل PDF إلى Word</p>
                </div>
                
                <!-- PDF to JPG -->
                <div class="tool-card bg-white rounded-lg p-6 text-center cursor-pointer" onclick="selectTool('pdf2jpg')">
                    <div class="bg-pink-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-file-image text-pink-600 text-2xl"></i>
                    </div>
                    <h3 class="font-semibold text-gray-800 mb-2" data-translate="pdfToJpg">PDF إلى JPG</h3>
                    <p class="text-sm text-gray-600" data-translate="pdfToJpgDesc">تحويل PDF إلى صور</p>
                </div>
                
                <!-- Rotate PDF -->
                <div class="tool-card bg-white rounded-lg p-6 text-center cursor-pointer" onclick="selectTool('rotate')">
                    <div class="bg-yellow-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-sync-alt text-yellow-600 text-2xl"></i>
                    </div>
                    <h3 class="font-semibold text-gray-800 mb-2" data-translate="rotatePdf">تدوير PDF</h3>
                    <p class="text-sm text-gray-600" data-translate="rotatePdfDesc">تدوير صفحات PDF</p>
                </div>
                
                <!-- Protect PDF -->
                <div class="tool-card bg-white rounded-lg p-6 text-center cursor-pointer" onclick="selectTool('protect')">
                    <div class="bg-red-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-lock text-red-600 text-2xl"></i>
                    </div>
                    <h3 class="font-semibold text-gray-800 mb-2" data-translate="protectPdf">حماية PDF</h3>
                    <p class="text-sm text-gray-600" data-translate="protectPdfDesc">إضافة كلمة مرور</p>
                </div>
                
                <!-- Unlock PDF -->
                <div class="tool-card bg-white rounded-lg p-6 text-center cursor-pointer" onclick="selectTool('unlock')">
                    <div class="bg-teal-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-unlock text-teal-600 text-2xl"></i>
                    </div>
                    <h3 class="font-semibold text-gray-800 mb-2" data-translate="unlockPdf">فتح PDF</h3>
                    <p class="text-sm text-gray-600" data-translate="unlockPdfDesc">إزالة كلمة المرور</p>
                </div>
                
                <!-- Add Watermark -->
                <div class="tool-card bg-white rounded-lg p-6 text-center cursor-pointer" onclick="selectTool('watermark')">
                    <div class="bg-gray-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-stamp text-gray-600 text-2xl"></i>
                    </div>
                    <h3 class="font-semibold text-gray-800 mb-2" data-translate="watermarkPdf">علامة مائية</h3>
                    <p class="text-sm text-gray-600" data-translate="watermarkPdfDesc">إضافة نص أو صورة</p>
                </div>
                
                <!-- Sign PDF -->
                <div class="tool-card bg-white rounded-lg p-6 text-center cursor-pointer" onclick="selectTool('sign')">
                    <div class="bg-cyan-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-signature text-cyan-600 text-2xl"></i>
                    </div>
                    <h3 class="font-semibold text-gray-800 mb-2" data-translate="signPdf">توقيع PDF</h3>
                    <p class="text-sm text-gray-600" data-translate="signPdfDesc">إضافة توقيع رقمي</p>
                </div>
                
                <!-- Edit PDF -->
                <div class="tool-card bg-white rounded-lg p-6 text-center cursor-pointer" onclick="selectTool('edit')">
                    <div class="bg-lime-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-edit text-lime-600 text-2xl"></i>
                    </div>
                    <h3 class="font-semibold text-gray-800 mb-2" data-translate="editPdf">تحرير PDF</h3>
                    <p class="text-sm text-gray-600" data-translate="editPdfDesc">تعديل النصوص والصور</p>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Upload Section -->
    <section id="uploadSection" class="py-16 bg-gray-50 hidden">
        <div class="container mx-auto px-4 max-w-4xl">
            <div class="bg-white rounded-lg shadow-lg p-8">
                <h2 id="toolTitle" class="text-3xl font-bold text-gaza mb-6 text-center"></h2>
                
                <!-- Tool Options -->
                <div id="toolOptions" class="mb-6 hidden">
                    <!-- Edit PDF Options -->
                    <div id="editOptions" class="hidden">
                        <div class="edit-pdf-container">
                            <h3 class="text-lg font-semibold text-gaza mb-4" data-translate="editOptions">خيارات التحرير:</h3>
                            <div class="edit-toolbar">
                                <button class="edit-tool-btn active" onclick="setEditMode('text')">
                                    <i class="fas fa-font ml-2"></i>
                                    <span data-translate="editText">نص</span>
                                </button>
                                <button class="edit-tool-btn" onclick="setEditMode('image')">
                                    <i class="fas fa-image ml-2"></i>
                                    <span data-translate="editImage">صورة</span>
                                </button>
                                <button class="edit-tool-btn" onclick="setEditMode('highlight')">
                                    <i class="fas fa-highlighter ml-2"></i>
                                    <span data-translate="editHighlight">تظليل</span>
                                </button>
                                <button class="edit-tool-btn" onclick="setEditMode('draw')">
                                    <i class="fas fa-pencil-alt ml-2"></i>
                                    <span data-translate="editDraw">رسم</span>
                                </button>
                                <input type="color" id="editColor" class="color-picker ml-2" value="#000000" title="اللون">
                                <select id="editFontSize" class="font-size-selector ml-2">
                                    <option value="12">12px</option>
                                    <option value="14">14px</option>
                                    <option value="16" selected>16px</option>
                                    <option value="18">18px</option>
                                    <option value="20">20px</option>
                                    <option value="24">24px</option>
                                </select>
                            </div>
                            <div id="pdfCanvas" class="pdf-preview">
                                <canvas id="editCanvas" width="800" height="600"></canvas>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Convert Options -->
                    <div id="convertOptions" class="hidden">
                        <div class="bg-gray-50 p-6 rounded-lg mb-4">
                            <h3 class="text-lg font-semibold text-gaza mb-4" data-translate="convertOptions">خيارات التحويل:</h3>
                            <div class="grid md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-gray-700 font-medium mb-2" data-translate="pageOrientation">اتجاه الصفحة:</label>
                                    <select id="pageOrientation" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:border-gaza">
                                        <option value="portrait" data-translate="portrait">عمودي</option>
                                        <option value="landscape" data-translate="landscape">أفقي</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-gray-700 font-medium mb-2" data-translate="pageSize">حجم الصفحة:</label>
                                    <select id="pageSize" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:border-gaza">
                                        <option value="a4">A4</option>
                                        <option value="a3">A3</option>
                                        <option value="letter">Letter</option>
                                        <option value="legal">Legal</option>
                                    </select>
                                </div>
                            </div>
                            <div class="mt-4">
                                <label class="flex items-center">
                                    <input type="checkbox" id="mergeIntoOne" checked class="ml-2">
                                    <span data-translate="mergeIntoOne">دمج جميع الملفات في ملف PDF واحد</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- PDF to Word Options -->
                    <div id="pdf2wordOptions" class="hidden">
                        <div class="bg-gray-50 p-6 rounded-lg mb-4">
                            <h3 class="text-lg font-semibold text-gaza mb-4" data-translate="pdf2wordOptions">خيارات التحويل إلى Word:</h3>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-gray-700 font-medium mb-2" data-translate="extractImages">استخراج الصور:</label>
                                    <label class="flex items-center">
                                        <input type="checkbox" id="extractImages" checked class="ml-2">
                                        <span data-translate="extractImagesDesc">استخراج الصور من PDF وإدراجها في مستند Word</span>
                                    </label>
                                </div>
                                <div>
                                    <label class="block text-gray-700 font-medium mb-2" data-translate="preserveFormatting">الحفاظ على التنسيق:</label>
                                    <label class="flex items-center">
                                        <input type="checkbox" id="preserveFormatting" checked class="ml-2">
                                        <span data-translate="preserveFormattingDesc">المحاولة على الحفاظ على تنسيق النص الأصلي</span>
                                    </label>
                                </div>
                                <div>
                                    <label class="block text-gray-700 font-medium mb-2" data-translate="ocrEnabled">التعرف الضوئي على الحروف (OCR):</label>
                                    <label class="flex items-center">
                                        <input type="checkbox" id="ocrEnabled" class="ml-2">
                                        <span data-translate="ocrEnabledDesc">استخراج النص من الصور الممسوحة ضوئياً</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Watermark Options -->
                    <div id="watermarkOptions" class="hidden">
                        <div class="bg-gray-50 p-4 rounded-lg mb-4">
                            <label class="block text-gray-700 font-medium mb-2" data-translate="watermarkText">نص العلامة المائية:</label>
                            <input type="text" id="watermarkText" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:border-gaza" placeholder="أدخل نص العلامة المائية">
                            <div class="mt-3 flex items-center space-x-reverse space-x-4">
                                <div>
                                    <label class="block text-gray-700 text-sm mb-1" data-translate="color">اللون:</label>
                                    <input type="color" id="watermarkColor" value="#ff0000" class="w-16 h-10 rounded">
                                </div>
                                <div>
                                    <label class="block text-gray-700 text-sm mb-1" data-translate="size">الحجم:</label>
                                    <select id="watermarkSize" class="px-3 py-2 border rounded-lg">
                                        <option value="20" data-translate="small">صغير</option>
                                        <option value="40" selected data-translate="medium">متوسط</option>
                                        <option value="60" data-translate="large">كبير</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-gray-700 text-sm mb-1" data-translate="opacity">الشفافية:</label>
                                    <input type="range" id="watermarkOpacity" min="0" max="100" value="50" class="w-24">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Rotate Options -->
                    <div id="rotateOptions" class="hidden">
                        <div class="bg-gray-50 p-4 rounded-lg mb-4">
                            <label class="block text-gray-700 font-medium mb-2" data-translate="rotationAngle">زاوية التدوير:</label>
                            <div class="grid grid-cols-4 gap-3">
                                <button onclick="setRotation(90)" class="px-4 py-2 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition">90°</button>
                                <button onclick="setRotation(180)" class="px-4 py-2 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition">180°</button>
                                <button onclick="setRotation(270)" class="px-4 py-2 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition">270°</button>
                                <button onclick="setRotation(0)" class="px-4 py-2 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition" data-translate="reset">إعادة</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Protect Options -->
                    <div id="protectOptions" class="hidden">
                        <div class="bg-gray-50 p-4 rounded-lg mb-4">
                            <label class="block text-gray-700 font-medium mb-2" data-translate="password">كلمة المرور:</label>
                            <input type="password" id="protectPassword" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:border-gaza" placeholder="أدخل كلمة المرور">
                            <label class="block text-gray-700 font-medium mt-3 mb-2" data-translate="confirmPassword">تأكيد كلمة المرور:</label>
                            <input type="password" id="protectPasswordConfirm" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:border-gaza" placeholder="أعد إدخال كلمة المرور">
                        </div>
                    </div>
                    
                    <!-- Split Options -->
                    <div id="splitOptions" class="hidden">
                        <div class="bg-gray-50 p-4 rounded-lg mb-4">
                            <label class="block text-gray-700 font-medium mb-2" data-translate="splitMethod">طريقة التقسيم:</label>
                            <div class="space-y-2">
                                <label class="flex items-center">
                                    <input type="radio" name="splitType" value="pages" checked class="ml-2">
                                    <span data-translate="splitEachPage">تقسيم كل صفحة على حدة</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="splitType" value="range" class="ml-2">
                                    <span data-translate="splitByRange">تقسيم حسب نطاق الصفحات</span>
                                </label>
                            </div>
                            <div id="splitRange" class="mt-3 hidden">
                                <input type="text" id="pageRange" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:border-gaza" placeholder="مثال: 1-5,8-10">
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Drop Zone -->
                <div id="dropZone" class="drop-zone rounded-lg p-12 text-center cursor-pointer hover:bg-green-50 transition">
                    <i class="fas fa-cloud-upload-alt text-6xl text-gaza mb-4"></i>
                    <p class="text-xl text-gray-600 mb-2" data-translate="dragDrop">اسحب وأفلت الملفات هنا</p>
                    <p class="text-gray-500 mb-4" data-translate="or">أو</p>
                    <button class="btn-primary px-6 py-3 rounded-lg font-semibold">
                        <span data-translate="chooseFiles">اختر الملفات</span>
                    </button>
                    <input type="file" id="fileInput" class="hidden" multiple>
                </div>
                
                <!-- Supported Formats -->
                <div id="supportedFormats" class="mt-4 text-center text-sm text-gray-600 hidden">
                    <p class="mb-2" data-translate="supportedFormats">الصيغ المدعومة:</p>
                    <div class="flex flex-wrap justify-center gap-2">
                        <span class="bg-green-100 text-green-700 px-3 py-1 rounded-full">PDF</span>
                        <span class="bg-blue-100 text-blue-700 px-3 py-1 rounded-full">Word (.doc, .docx)</span>
                        <span class="bg-green-100 text-green-700 px-3 py-1 rounded-full">Excel (.xls, .xlsx)</span>
                        <span class="bg-purple-100 text-purple-700 px-3 py-1 rounded-full">الصور (.jpg, .png, .gif)</span>
                        <span class="bg-gray-100 text-gray-700 px-3 py-1 rounded-full">نصوص (.txt)</span>
                    </div>
                </div>
                
                <!-- File List -->
                <div id="fileList" class="mt-8 hidden">
                    <h3 class="text-lg font-semibold text-gaza mb-4" data-translate="selectedFiles">الملفات المحددة:</h3>
                    <div id="filesContainer" class="space-y-3"></div>
                </div>
                
                <!-- Process Button -->
                <div id="processSection" class="mt-8 text-center hidden">
                    <button onclick="processFiles()" class="btn-primary px-8 py-3 rounded-lg text-lg font-semibold">
                        <span data-translate="processFiles">معالجة الملفات</span>
                    </button>
                </div>
                
                <!-- Progress -->
                <div id="progressSection" class="mt-8 hidden">
                    <div class="flex items-center justify-center mb-4">
                        <div class="loading-spinner"></div>
                    </div>
                    <div class="bg-gray-200 rounded-full h-3 overflow-hidden">
                        <div id="progressBar" class="progress-bar h-full w-0"></div>
                    </div>
                    <p id="progressText" class="text-center text-gray-600 mt-2" data-translate="processing">جاري المعالجة...</p>
                </div>
                
                <!-- Results -->
                <div id="resultsSection" class="mt-8 hidden">
                    <div class="bg-green-50 border border-green-200 rounded-lg p-6">
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center">
                                <i class="fas fa-check-circle text-green-600 text-2xl ml-3"></i>
                                <h3 class="text-lg font-semibold text-green-800" data-translate="success">تمت المعالجة بنجاح!</h3>
                            </div>
                            <button onclick="resetTool()" class="text-gray-500 hover:text-gray-700">
                                <i class="fas fa-times text-xl"></i>
                            </button>
                        </div>
                        <div id="downloadLinks" class="space-y-2"></div>
                        <div class="mt-4 bg-gaza bg-opacity-10 p-3 rounded">
                            <p class="text-sm text-gaza">
                                <i class="fas fa-heart ml-2"></i>
                                <span data-translate="thankYou">شكراً لاستخدامك غزة PDF. استخدامك يساهم في دعم غزة!</span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Features Section -->
    <section class="py-16 bg-gray-50">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl font-bold text-center text-gaza mb-12" data-translate="whyChooseUs">لماذا تختار غزة PDF؟</h2>
            
            <div class="grid md:grid-cols-3 gap-8">
                <div class="text-center">
                    <div class="bg-green-100 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-shield-alt text-green-600 text-3xl"></i>
                    </div>
                    <h3 class="text-xl font-semibold text-gaza mb-2" data-translate="secure">آمن وموثوق</h3>
                    <p class="text-gray-600" data-translate="secureDesc">ملفاتك محمية ومشفرة بالكامل، يتم حذفها تلقائياً بعد المعالجة</p>
                </div>
                
                <div class="text-center">
                    <div class="bg-blue-100 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-bolt text-blue-600 text-3xl"></i>
                    </div>
                    <h3 class="text-xl font-semibold text-gaza mb-2" data-translate="fast">سريع وسهل</h3>
                    <p class="text-gray-600" data-translate="fastDesc">معالجة الملفات بثوانٍ معدودة مع واجهة مستخدم بسيطة وسهلة</p>
                </div>
                
                <div class="text-center">
                    <div class="bg-purple-100 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-mobile-alt text-purple-600 text-3xl"></i>
                    </div>
                    <h3 class="text-xl font-semibold text-gaza mb-2" data-translate="compatible">متوافق مع جميع الأجهزة</h3>
                    <p class="text-gray-600" data-translate="compatibleDesc">يعمل على الكمبيوتر، الجوال، والتابلت بدون الحاجة لتنزيل برامج</p>
                </div>
            </div>
            
            <div class="mt-12 text-center">
                <div class="bg-gaza text-white rounded-lg p-6 inline-block">
                    <h3 class="text-2xl font-bold mb-2" data-translate="ourCommitment">التزامنا</h3>
                    <p class="text-lg" data-translate="commitmentDesc">100% من الأرباح تذهب لدعم أهالي غزة</p>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Footer -->
    <footer class="footer-bg text-white py-12">
        <div class="container mx-auto px-4">
            <div class="grid md:grid-cols-4 gap-8">
                <div>
                    <div class="flex items-center mb-4">
                        <div class="w-10 h-10 bg-gaza rounded-lg flex items-center justify-center ml-3">
                            <span class="text-white font-bold text-lg">GP</span>
                        </div>
                        <h3 class="text-xl font-bold" data-translate="footerSiteName">غزة PDF</h3>
                    </div>
                    <p class="text-gray-400" data-translate="footerDesc">منصة غزة لمعالجة ملفات PDF</p>
                    <p class="text-green-400 mt-2 font-semibold" data-translate="footerProfit">100% للأرباح لغزة</p>
                </div>
                
                <div>
                    <h4 class="font-semibold mb-4" data-translate="footerTools">الأدوات</h4>
                    <ul class="space-y-2 text-gray-400">
                        <li><a href="#" class="hover:text-white transition" data-translate="footerMerge">دمج PDF</a></li>
                        <li><a href="#" class="hover:text-white transition" data-translate="footerSplit">تقسيم PDF</a></li>
                        <li><a href="#" class="hover:text-white transition" data-translate="footerCompress">ضغط PDF</a></li>
                        <li><a href="#" class="hover:text-white transition" data-translate="footerConvert">تحويل PDF</a></li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="font-semibold mb-4" data-translate="footerSite">الموقع</h4>
                    <ul class="space-y-2 text-gray-400">
                        <li><a href="#" onclick="showModal('about')" class="hover:text-white transition" data-translate="footerAbout">عن الموقع</a></li>
                        <li><a href="#" class="hover:text-white transition" data-translate="footerPrivacy">سياسة الخصوصية</a></li>
                        <li><a href="#" class="hover:text-white transition" data-translate="footerTerms">الشروط والأحكام</a></li>
                        <li><a href="#" onclick="showModal('support')" class="hover:text-white transition" data-translate="footerContact">اتصل بنا</a></li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="font-semibold mb-4" data-translate="footerFollow">تابعنا</h4>
                    <div class="flex space-x-reverse space-x-4">
                        <a href="#" class="text-gray-400 hover:text-white transition">
                            <i class="fab fa-facebook-f text-xl"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white transition">
                            <i class="fab fa-twitter text-xl"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white transition">
                            <i class="fab fa-linkedin-in text-xl"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white transition">
                            <i class="fab fa-instagram text-xl"></i>
                        </a>
                    </div>
                    <div class="mt-4">
                        <button onclick="showCryptoDonation()" class="bg-gaza text-white px-4 py-2 rounded hover:bg-green-700 transition text-sm">
                            <i class="fab fa-bitcoin ml-2"></i>
                            <span data-translate="donateCrypto">تبرع بالكريبتو</span>
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="border-t border-gray-700 mt-8 pt-8 text-center text-gray-400">
                <p>&copy; 2024 غزة PDF. <span data-translate="footerRights">جميع الحقوق محفوظة.</span></p>
                <p class="mt-2 text-green-400" data-translate="footerGazaSupport">100% مكرس لدعم غزة وفلسطين</p>
                <p class="mt-2 text-sm">صُمم في غزة ❤️</p>
            </div>
        </div>
    </footer>
    
    <!-- Modals -->
    <!-- About Modal -->
    <div id="aboutModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('about')">&times;</span>
            <h2 class="text-2xl font-bold text-gaza mb-4" data-translate="aboutTitle">عن غزة PDF</h2>
            <div class="prose max-w-none">
                <p class="text-gray-700 mb-4" data-translate="aboutDesc1">
                    غزة PDF هي منصة احترافية لمعالجة ملفات PDF تهدف إلى توفير أفضل الأدوات مجاناً للجميع. تأسست المنصة من قلب غزة، ونعمل بكل تفانٍ لدعم أهلنا في غزة.
                </p>
                <p class="text-gray-700 mb-4" data-translate="aboutDesc2">
                    نحن نؤمن بأهمية توفير أدوات رقمية قوية ومجانية للجميع، مع الحفاظ على خصوصية وأمان المستخدمين. كل استخدام لمنصتنا هو مساهمة مباشرة في دعم أهالي غزة.
                </p>
                <h3 class="text-xl font-semibold mt-6 mb-3 text-gaza" data-translate="aboutMission">مهمتنا</h3>
                <p class="text-gray-700 mb-4" data-translate="aboutMissionDesc">
                    تمكين المستخدمين من معالجة ملفات PDF بسهولة وسرعة، مع دعم أهلنا في غزة من خلال التبرع بـ 100% من الأرباح.
                </p>
                <h3 class="text-xl font-semibold mt-6 mb-3 text-gaza" data-translate="aboutVision">رؤيتنا</h3>
                <p class="text-gray-700" data-translate="aboutVisionDesc">
                    أن نكون الخيار الأول لمعالجة PDF في العالم العربي، مع المساهمة في دعم التعليم والتطوير في غزة وفلسطين. نسعى لجعل التكنولوجيا أداة للتغيير الإيجابي في مجتمعاتنا.
                </p>
                <div class="mt-6 bg-green-50 p-4 rounded-lg">
                    <h4 class="font-semibold text-gaza mb-2" data-translate="ourPromise">وعدنا لكم</h4>
                    <ul class="space-y-1 text-gaza">
                        <li>• 100% من الأرباح تذهب لدعم غزة</li>
                        <li>• جميع الأدوات مجانية للأبد</li>
                        <li>• خصوصية وأمان تامين لملفاتكم</li>
                        <li>• شفافية كاملة في جميع العمليات</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Support Modal -->
    <div id="supportModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('support')">&times;</span>
            <h2 class="text-2xl font-bold text-gaza mb-4" data-translate="supportTitle">الدعم الفني</h2>
            <div class="space-y-6">
                <div>
                    <h3 class="text-lg font-semibold mb-2 text-gaza" data-translate="supportContact">تواصل معنا</h3>
                    <p class="text-gray-700 mb-4" data-translate="supportContactDesc">
                        إذا واجهتك أي مشكلة أو كان لديك أي سؤال، لا تتردد في التواصل معنا:
                    </p>
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <p class="flex items-center mb-2">
                            <i class="fas fa-envelope text-gaza ml-2"></i>
                            <span>yazanalkord05@gmail.com</span>
                        </p>
                        <p class="flex items-center">
                            <i class="fas fa-phone text-gaza ml-2"></i>
                            <span>+970 594 850 560</span>
                        </p>
                    </div>
                </div>
                
                <div>
                    <h3 class="text-lg font-semibold mb-2 text-gaza" data-translate="supportFAQ">الأسئلة الشائعة</h3>
                    <div class="space-y-3">
                        <div class="border-b pb-3">
                            <h4 class="font-medium text-gaza" data-translate="faq1Q">هل الموقع مجاني؟</h4>
                            <p class="text-gray-600 text-sm" data-translate="faq1A">نعم، جميع الأدوات مجانية بالكامل ولا تتطلب تسجيل.</p>
                        </div>
                        <div class="border-b pb-3">
                            <h4 class="font-medium text-gaza" data-translate="faq2Q">هل ملفاتي آمنة؟</h4>
                            <p class="text-gray-600 text-sm" data-translate="faq2A">نعم، جميع الملفات تتم معالجتها على جهازك وتحذف تلقائياً بعد المعالجة.</p>
                        </div>
                        <div class="border-b pb-3">
                            <h4 class="font-medium text-gaza" data-translate="faq3Q">كيف يتم دعم غزة؟</h4>
                            <p class="text-gray-600 text-sm" data-translate="faq3A">100% من الأرباح تذهب مباشرة لدعم أهالي غزة من خلال التبرعات للجمعيات الخيرية المعتمدة.</p>
                        </div>
                        <div>
                            <h4 class="font-medium text-gaza" data-translate="faq4Q">ما هي الصيغ المدعومة؟</h4>
                            <p class="text-gray-600 text-sm" data-translate="faq4A">ندعم PDF, Word, Excel, PowerPoint, الصور, والنصوص.</p>
                        </div>
                    </div>
                </div>
                <div class="bg-green-50 p-4 rounded-lg">
                    <h4 class="font-semibold text-gaza mb-2" data-translate="donationInfo">معلومات التبرع</h4>
                    <p class="text-gaza text-sm mb-2" data-translate="donationDesc">
                        يمكنك التبرع لدعم غزة بعدة طرق:
                    </p>
                    <ul class="text-gaza text-sm space-y-1">
                        <li>• التبرع بالعملات الرقمية (Bitcoin, USDT)</li>
                        <li>• التحويل البنكي المباشر</li>
                        <li>• التبرع عبر المنصات الموثوقة</li>
                        <li>• المشاركة في حملات الدعم</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Global variables
        let selectedTool = '';
        let uploadedFiles = [];
        let rotationAngle = 0;
        let currentLanguage = 'ar';
        let editMode = 'text';
        let pdfDoc = null;
        let currentPage = null;
        let canvas = null;
        let ctx = null;
        
        // Translations
        const translations = {
            ar: {
                siteName: "غزة PDF",
                profitGaza: "100% للأرباح لغزة",
                navAbout: "عن الموقع",
                navSupport: "الدعم",
                navGaza: "عن غزة",
                navContact: "تواصل معنا",
                heroTitle: "منصة غزة لمعالجة ملفات PDF",
                heroSubtitle: "أدوات احترافية مجانية لمعالجة ملفات PDF - دمج، تقسيم، ضغط، وتحويل",
                profit100: "100% من الأرباح لدعم غزة",
                freeForever: "مجاني للأبد",
                startNow: "ابدأ الآن",
                donateNow: "تبرع الآن",
                gazaTitle: "غزة.. أرض الصمود والعزة",
                gazaSubtitle: "من قلب غزة، نقدم لكم هذه المنصة كدعم لأهلنا في غزة. كل استخدام للموقع هو مساهمة مباشرة في دعم صمود أهلنا في غزة.",
                gazaHistoryYears: "سنة من التاريخ",
                gazaPopulation: "نسمة من الصامدين",
                gazaSiegeDays: "يوم من الحصار",
                gazaHope: "أمل لا ينتهي",
                gazaTimeline: "رحلة غزة عبر التاريخ",
                ancientGaza: "غزة القديمة (3000 ق.م)",
                ancientGazaDesc: "أحد أقدم المدن المأهولة في العالم، مركز تجاري هام على طريق البحر المتوسط.",
                islamicGaza: "غزة الإسلامية (637 م)",
                islamicGazaDesc: "فتحت في عهد عمر بن الخطاب، أصبحت مركزاً علمياً وثقافياً مهماً.",
                modernGaza: "غزة الحديثة (1948)",
                modernGazaDesc: "أصبحت ملجأً للاجئين الفلسطينيين ورمزاً للنضال من أجل العودة.",
                gazaToday: "غزة اليوم (2024)",
                gazaTodayDesc: "تواصل الصمود رغم الحصار والعدوان، تنتصر الحياة على الموت، والأمل على اليأس.",
                contactTitle: "تواصل معنا",
                contactSubtitle: "نحن هنا من غزة لنستمع إليك وندعمك",
                contactInfo: "معلومات التواصل",
                donateTitle: "ادعم غزة",
                donateSubtitle: "تبرعك يدعم صمود أهلنا في غزة",
                cryptoDonationTitle: "التبرع بالعملات الرقمية",
                whyCrypto: "لماذا التبرع بالكريبتو؟",
                cryptoBenefit1: "تحويلات سريعة وآمنة عبر الحدود",
                cryptoBenefit2: "رسوم منخفضة مقارنة بالتحويلات التقليدية",
                cryptoBenefit3: "وصول مباشر للمستفيدين بدون وسطاء",
                cryptoBenefit4: "خصوصية عالية وأمان للمعاملات",
                bitcoin: "Bitcoin (BTC)",
                bitcoinAddress: "عنوان المحفظة:",
                usdt: "USDT (ERC20)",
                ethereumAddress: "عنوان المحفظة:",
                importantNote: "ملاحظة هامة:",
                cryptoNote: "جميع التبرعات بالعملات الرقمية تذهب بالكامل لدعم أهالي غزة. نحن نستخدم محافظ آمنة ومشفرة لضمان وصول التبرعات لمستحقيها.",
                toolsTitle: "أدواتنا",
                mergePdf: "دمج PDF",
                mergePdfDesc: "دمج ملفات PDF متعددة",
                splitPdf: "تقسيم PDF",
                splitPdfDesc: "تقسيم ملف PDF إلى صفحات",
                compressPdf: "ضغط PDF",
                compressPdfDesc: "تقليل حجم ملفات PDF",
                convertToPdf: "تحويل إلى PDF",
                convertToPdfDesc: "Word, Excel, JPG",
                pdfToWord: "PDF إلى Word",
                pdfToWordDesc: "تحويل PDF إلى Word",
                pdfToJpg: "PDF إلى JPG",
                pdfToJpgDesc: "تحويل PDF إلى صور",
                rotatePdf: "تدوير PDF",
                rotatePdfDesc: "تدوير صفحات PDF",
                protectPdf: "حماية PDF",
                protectPdfDesc: "إضافة كلمة مرور",
                unlockPdf: "فتح PDF",
                unlockPdfDesc: "إزالة كلمة المرور",
                watermarkPdf: "علامة مائية",
                watermarkPdfDesc: "إضافة نص أو صورة",
                signPdf: "توقيع PDF",
                signPdfDesc: "إضافة توقيع رقمي",
                editPdf: "تحرير PDF",
                editPdfDesc: "تعديل النصوص والصور",
                editOptions: "خيارات التحرير:",
                editText: "نص",
                editImage: "صورة",
                editHighlight: "تظليل",
                editDraw: "رسم",
                pdf2wordOptions: "خيارات التحويل إلى Word:",
                extractImages: "استخراج الصور:",
                extractImagesDesc: "استخراج الصور من PDF وإدراجها في مستند Word",
                preserveFormatting: "الحفاظ على التنسيق:",
                preserveFormattingDesc: "المحاولة على الحفاظ على تنسيق النص الأصلي",
                ocrEnabled: "التعرف الضوئي على الحروف (OCR):",
                ocrEnabledDesc: "استخراج النص من الصور الممسوحة ضوئياً",
                convertOptions: "خيارات التحويل:",
                pageOrientation: "اتجاه الصفحة:",
                portrait: "عمودي",
                landscape: "أفقي",
                pageSize: "حجم الصفحة:",
                mergeIntoOne: "دمج جميع الملفات في ملف PDF واحد",
                watermarkText: "نص العلامة المائية:",
                color: "اللون:",
                size: "الحجم:",
                small: "صغير",
                medium: "متوسط",
                large: "كبير",
                opacity: "الشفافية:",
                rotationAngle: "زاوية التدوير:",
                reset: "إعادة",
                password: "كلمة المرور:",
                confirmPassword: "تأكيد كلمة المرور:",
                splitMethod: "طريقة التقسيم:",
                splitEachPage: "تقسيم كل صفحة على حدة",
                splitByRange: "تقسيم حسب نطاق الصفحات",
                dragDrop: "اسحب وأفلت الملفات هنا",
                or: "أو",
                chooseFiles: "اختر الملفات",
                supportedFormats: "الصيغ المدعومة:",
                selectedFiles: "الملفات المحددة:",
                processFiles: "معالجة الملفات",
                processing: "جاري المعالجة...",
                success: "تمت المعالجة بنجاح!",
                thankYou: "شكراً لاستخدامك غزة PDF. استخدامك يساهم في دعم غزة!",
                whyChooseUs: "لماذا تختار غزة PDF؟",
                secure: "آمن وموثوق",
                secureDesc: "ملفاتك محمية ومشفرة بالكامل، يتم حذفها تلقائياً بعد المعالجة",
                fast: "سريع وسهل",
                fastDesc: "معالجة الملفات بثوانٍ معدودة مع واجهة مستخدم بسيطة وسهلة",
                compatible: "متوافق مع جميع الأجهزة",
                compatibleDesc: "يعمل على الكمبيوتر، الجوال، والتابلت بدون الحاجة لتنزيل برامج",
                ourCommitment: "التزامنا",
                commitmentDesc: "100% من الأرباح تذهب لدعم أهالي غزة",
                footerSiteName: "غزة PDF",
                footerDesc: "منصة غزة لمعالجة ملفات PDF",
                footerProfit: "100% للأرباح لغزة",
                footerTools: "الأدوات",
                footerMerge: "دمج PDF",
                footerSplit: "تقسيم PDF",
                footerCompress: "ضغط PDF",
                footerConvert: "تحويل PDF",
                footerSite: "الموقع",
                footerAbout: "عن الموقع",
                footerPrivacy: "سياسة الخصوصية",
                footerTerms: "الشروط والأحكام",
                footerContact: "اتصل بنا",
                footerFollow: "تابعنا",
                footerRights: "جميع الحقوق محفوظة.",
                footerGazaSupport: "100% مكرس لدعم غزة وفلسطين",
                aboutTitle: "عن غزة PDF",
                aboutDesc1: "غزة PDF هي منصة احترافية لمعالجة ملفات PDF تهدف إلى توفير أفضل الأدوات مجاناً للجميع. تأسست المنصة من قلب غزة، ونعمل بكل تفانٍ لدعم أهلنا في غزة.",
                aboutDesc2: "نحن نؤمن بأهمية توفير أدوات رقمية قوية ومجانية للجميع، مع الحفاظ على خصوصية وأمان المستخدمين. كل استخدام لمنصتنا هو مساهمة مباشرة في دعم أهالي غزة.",
                aboutMission: "مهمتنا",
                aboutMissionDesc: "تمكين المستخدمين من معالجة ملفات PDF بسهولة وسرعة، مع دعم أهلنا في غزة من خلال التبرع بـ 100% من الأرباح.",
                aboutVision: "رؤيتنا",
                aboutVisionDesc: "أن نكون الخيار الأول لمعالجة PDF في العالم العربي، مع المساهمة في دعم التعليم والتطوير في غزة وفلسطين. نسعى لجعل التكنولوجيا أداة للتغيير الإيجابي في مجتمعاتنا.",
                ourPromise: "وعدنا لكم",
                supportTitle: "الدعم الفني",
                supportContact: "تواصل معنا",
                supportContactDesc: "إذا واجهتك أي مشكلة أو كان لديك أي سؤال، لا تتردد في التواصل معنا:",
                supportFAQ: "الأسئلة الشائعة",
                faq1Q: "هل الموقع مجاني؟",
                faq1A: "نعم، جميع الأدوات مجانية بالكامل ولا تتطلب تسجيل.",
                faq2Q: "هل ملفاتي آمنة؟",
                faq2A: "نعم، جميع الملفات تتم معالجتها على جهازك وتحذف تلقائياً بعد المعالجة.",
                faq3Q: "كيف يتم دعم غزة؟",
                faq3A: "100% من الأرباح تذهب مباشرة لدعم أهالي غزة من خلال التبرعات للجمعيات الخيرية المعتمدة.",
                faq4Q: "ما هي الصيغ المدعومة؟",
                faq4A: "ندعم PDF, Word, Excel, PowerPoint, الصور, والنصوص.",
                donationInfo: "معلومات التبرع",
                donationDesc: "يمكنك التبرع لدعم غزة بعدة طرق:",
                download: "تحميل",
                processingError: "حدث خطأ أثناء معالجة الملفات",
                fileNotPdf: "الملف ليس من نوع PDF",
                chooseValidFiles: "الرجاء اختيار ملفات صالحة",
                needTwoFiles: "الرجاء اختيار ملفين PDF على الأقل للدمج",
                needOneFile: "الرجاء اختيار ملف PDF واحد فقط",
                enterPageRange: "الرجاء إدخال نطاق الصفحات",
                chooseOneFile: "الرجاء اختيار ملف واحد على الأقل",
                cannotCompress: "لا يمكن ضغط ملف PDF. قد يكون محمياً.",
                conversionError: "حدث خطأ أثناء تحويل الملفات إلى PDF",
                cannotConvert: "لا يمكن تحويل PDF إلى JPG. قد يكون الملف تالفاً.",
                chooseRotation: "الرجاء اختيار زاوية التدوير",
                cannotRotate: "لا يمكن تدوير ملف PDF. قد يكون محمياً.",
                enterWatermark: "الرجاء إدخال نص العلامة المائية",
                cannotWatermark: "لا يمكن إضافة العلامة المائية. قد يكون الملف محمياً.",
                enterPassword: "الرجاء إدخال كلمة المرور",
                passwordsNotMatch: "كلمات المرور غير متطابقة",
                passwordTooShort: "كلمة المرور يجب أن تكون 4 أحرف على الأقل",
                cannotProtect: "لا يمكن حماية ملف PDF. قد يكون محمياً مسبقاً.",
                cannotUnlock: "لا يمكن فتح هذا الملف. قد يكون محمياً بكلمة مرور قوية.",
                cannotConvertToWord: "لا يمكن تحويل PDF إلى Word",
                cannotSign: "لا يمكن توقيع ملف PDF. قد يكون محمياً.",
                cannotEdit: "لا يمكن تحرير ملف PDF. قد يكون محمياً."
            },
            en: {
                siteName: "Gaza PDF",
                profitGaza: "100% Profits to Gaza",
                navAbout: "About",
                navSupport: "Support",
                navGaza: "About Gaza",
                navContact: "Contact Us",
                heroTitle: "Gaza PDF Processing Platform",
                heroSubtitle: "Professional free tools for PDF processing - merge, split, compress, and convert",
                profit100: "100% of Profits to Support Gaza",
                freeForever: "Forever Free",
                startNow: "Start Now",
                donateNow: "Donate Now",
                gazaTitle: "Gaza.. Land of Resilience and Dignity",
                gazaSubtitle: "From the heart of Gaza, we present this platform to support our people. Every use of the site is a direct contribution to supporting our people in Gaza.",
                gazaHistoryYears: "Years of History",
                gazaPopulation: "Resilient People",
                gazaSiegeDays: "Days of Siege",
                gazaHope: "Endless Hope",
                gazaTimeline: "Gaza's Journey Through History",
                ancientGaza: "Ancient Gaza (3000 BC)",
                ancientGazaDesc: "One of the oldest continuously inhabited cities in the world, an important commercial center on the Mediterranean Sea route.",
                islamicGaza: "Islamic Gaza (637 AD)",
                islamicGazaDesc: "Conquered during the caliphate of Omar ibn Al-Khattab, became an important scientific and cultural center.",
                modernGaza: "Modern Gaza (1948)",
                modernGazaDesc: "Became a refuge for Palestinian refugees and a symbol of struggle for return.",
                gazaToday: "Gaza Today (2024)",
                gazaTodayDesc: "Continues to stand firm despite siege and aggression, life triumphs over death, hope over despair.",
                contactTitle: "Contact Us",
                contactSubtitle: "We are here from Gaza to listen and support you",
                contactInfo: "Contact Information",
                donateTitle: "Support Gaza",
                donateSubtitle: "Your donation supports the resilience of our people in Gaza",
                cryptoDonationTitle: "Donate with Digital Currencies",
                whyCrypto: "Why Donate with Crypto?",
                cryptoBenefit1: "Fast and secure transfers across borders",
                cryptoBenefit2: "Low fees compared to traditional transfers",
                cryptoBenefit3: "Direct access to beneficiaries without intermediaries",
                cryptoBenefit4: "High privacy and security for transactions",
                bitcoin: "Bitcoin (BTC)",
                bitcoinAddress: "Wallet Address:",
                usdt: "USDT (ERC20)",
                ethereumAddress: "Wallet Address:",
                importantNote: "Important Note:",
                cryptoNote: "All cryptocurrency donations go entirely to support the people of Gaza. We use secure and encrypted wallets to ensure donations reach their rightful recipients.",
                toolsTitle: "Our Tools",
                mergePdf: "Merge PDF",
                mergePdfDesc: "Merge multiple PDF files",
                splitPdf: "Split PDF",
                splitPdfDesc: "Split PDF file into pages",
                compressPdf: "Compress PDF",
                compressPdfDesc: "Reduce PDF file sizes",
                convertToPdf: "Convert to PDF",
                convertToPdfDesc: "Word, Excel, JPG",
                pdfToWord: "PDF to Word",
                pdfToWordDesc: "Convert PDF to Word",
                pdfToJpg: "PDF to JPG",
                pdfToJpgDesc: "Convert PDF to images",
                rotatePdf: "Rotate PDF",
                rotatePdfDesc: "Rotate PDF pages",
                protectPdf: "Protect PDF",
                protectPdfDesc: "Add password",
                unlockPdf: "Unlock PDF",
                unlockPdfDesc: "Remove password",
                watermarkPdf: "Watermark",
                watermarkPdfDesc: "Add text or image",
                signPdf: "Sign PDF",
                signPdfDesc: "Add digital signature",
                editPdf: "Edit PDF",
                editPdfDesc: "Edit text and images",
                editOptions: "Edit Options:",
                editText: "Text",
                editImage: "Image",
                editHighlight: "Highlight",
                editDraw: "Draw",
                pdf2wordOptions: "PDF to Word Options:",
                extractImages: "Extract Images:",
                extractImagesDesc: "Extract images from PDF and insert them into Word document",
                preserveFormatting: "Preserve Formatting:",
                preserveFormattingDesc: "Try to preserve original text formatting",
                ocrEnabled: "Optical Character Recognition (OCR):",
                ocrEnabledDesc: "Extract text from scanned images",
                convertOptions: "Conversion Options:",
                pageOrientation: "Page Orientation:",
                portrait: "Portrait",
                landscape: "Landscape",
                pageSize: "Page Size:",
                mergeIntoOne: "Merge all files into one PDF",
                watermarkText: "Watermark Text:",
                color: "Color:",
                size: "Size:",
                small: "Small",
                medium: "Medium",
                large: "Large",
                opacity: "Opacity:",
                rotationAngle: "Rotation Angle:",
                reset: "Reset",
                password: "Password:",
                confirmPassword: "Confirm Password:",
                splitMethod: "Split Method:",
                splitEachPage: "Split each page separately",
                splitByRange: "Split by page range",
                dragDrop: "Drag and drop files here",
                or: "or",
                chooseFiles: "Choose Files",
                supportedFormats: "Supported Formats:",
                selectedFiles: "Selected Files:",
                processFiles: "Process Files",
                processing: "Processing...",
                success: "Processing completed successfully!",
                thankYou: "Thank you for using Gaza PDF. Your usage contributes to supporting Gaza!",
                whyChooseUs: "Why Choose Gaza PDF?",
                secure: "Secure & Reliable",
                secureDesc: "Your files are fully protected and encrypted, automatically deleted after processing",
                fast: "Fast & Easy",
                fastDesc: "Process files in seconds with a simple and user-friendly interface",
                compatible: "Compatible with All Devices",
                compatibleDesc: "Works on computers, mobile, and tablets without downloading software",
                ourCommitment: "Our Commitment",
                commitmentDesc: "100% of profits go to support the people of Gaza",
                footerSiteName: "Gaza PDF",
                footerDesc: "Gaza PDF Processing Platform",
                footerProfit: "100% Profits to Gaza",
                footerTools: "Tools",
                footerMerge: "Merge PDF",
                footerSplit: "Split PDF",
                footerCompress: "Compress PDF",
                footerConvert: "Convert PDF",
                footerSite: "Site",
                footerAbout: "About",
                footerPrivacy: "Privacy Policy",
                footerTerms: "Terms & Conditions",
                footerContact: "Contact Us",
                footerFollow: "Follow Us",
                footerRights: "All rights reserved.",
                footerGazaSupport: "100% Dedicated to supporting Gaza and Palestine",
                aboutTitle: "About Gaza PDF",
                aboutDesc1: "Gaza PDF is a professional platform for PDF processing, aiming to provide the best free tools for everyone. The platform was established from the heart of Gaza, and we work diligently to support our people in Gaza.",
                aboutDesc2: "We believe in the importance of providing powerful and free digital tools for everyone, while maintaining user privacy and security. Every use of our platform is a direct contribution to supporting the people of Gaza.",
                aboutMission: "Our Mission",
                aboutMissionDesc: "Empowering users to process PDF files easily and quickly, while supporting our people in Gaza by donating 100% of profits.",
                aboutVision: "Our Vision",
                aboutVisionDesc: "To be the first choice for PDF processing in the Arab world, while contributing to supporting education and development in Gaza and Palestine. We seek to make technology a tool for positive change in our societies.",
                ourPromise: "Our Promise to You",
                supportTitle: "Technical Support",
                supportContact: "Contact Us",
                supportContactDesc: "If you encounter any problem or have any question, don't hesitate to contact us:",
                supportFAQ: "Frequently Asked Questions",
                faq1Q: "Is the site free?",
                faq1A: "Yes, all tools are completely free and do not require registration.",
                faq2Q: "Are my files safe?",
                faq2A: "Yes, all files are processed on your device and automatically deleted after processing.",
                faq3Q: "How is Gaza supported?",
                faq3A: "100% of profits go directly to support the people of Gaza through donations to approved charitable organizations.",
                faq4Q: "What formats are supported?",
                faq4A: "We support PDF, Word, Excel, PowerPoint, Images, and Text files.",
                donationInfo: "Donation Information",
                donationDesc: "You can donate to support Gaza in several ways:",
                download: "Download",
                processingError: "Error occurred while processing files",
                fileNotPdf: "File is not PDF type",
                chooseValidFiles: "Please choose valid files",
                needTwoFiles: "Please choose at least two PDF files to merge",
                needOneFile: "Please choose only one PDF file",
                enterPageRange: "Please enter page range",
                chooseOneFile: "Please choose at least one file",
                cannotCompress: "Cannot compress PDF file. It may be protected.",
                conversionError: "Error occurred while converting files to PDF",
                cannotConvert: "Cannot convert PDF to JPG. File may be corrupted.",
                chooseRotation: "Please choose rotation angle",
                cannotRotate: "Cannot rotate PDF file. It may be protected.",
                enterWatermark: "Please enter watermark text",
                cannotWatermark: "Cannot add watermark. File may be protected.",
                enterPassword: "Please enter password",
                passwordsNotMatch: "Passwords do not match",
                passwordTooShort: "Password must be at least 4 characters",
                cannotProtect: "Cannot protect PDF file. It may be already protected.",
                cannotUnlock: "Cannot unlock this file. It may be protected with a strong password.",
                cannotConvertToWord: "Cannot convert PDF to Word",
                cannotSign: "Cannot sign PDF file. It may be protected.",
                cannotEdit: "Cannot edit PDF file. It may be protected."
            }
        };
        
        // Tool names mapping
        const toolNames = {
            ar: {
                'merge': 'دمج ملفات PDF',
                'split': 'تقسيم ملف PDF',
                'compress': 'ضغط ملفات PDF',
                'convert': 'تحويل إلى PDF',
                'pdf2word': 'تحويل PDF إلى Word',
                'pdf2jpg': 'تحويل PDF إلى JPG',
                'rotate': 'تدوير ملف PDF',
                'protect': 'حماية ملف PDF',
                'unlock': 'فتح ملف PDF',
                'watermark': 'إضافة علامة مائية',
                'sign': 'توقيع ملف PDF',
                'edit': 'تحرير ملف PDF'
            },
            en: {
                'merge': 'Merge PDF Files',
                'split': 'Split PDF File',
                'compress': 'Compress PDF Files',
                'convert': 'Convert to PDF',
                'pdf2word': 'Convert PDF to Word',
                'pdf2jpg': 'Convert PDF to JPG',
                'rotate': 'Rotate PDF File',
                'protect': 'Protect PDF File',
                'unlock': 'Unlock PDF File',
                'watermark': 'Add Watermark',
                'sign': 'Sign PDF File',
                'edit': 'Edit PDF File'
            }
        };
        
        // Initialize language
        function initLanguage() {
            const savedLang = localStorage.getItem('gazapdf-lang');
            if (savedLang && (savedLang === 'ar' || savedLang === 'en')) {
                currentLanguage = savedLang;
            } else {
                currentLanguage = 'ar';
            }
            updateLanguage();
        }
        
        // Change language
        function changeLanguage(lang) {
            currentLanguage = lang;
            localStorage.setItem('gazapdf-lang', lang);
            updateLanguage();
            toggleLangDropdown();
        }
        
        // Update language
        function updateLanguage() {
            // Update HTML attributes
            document.documentElement.lang = currentLanguage;
            document.documentElement.dir = currentLanguage === 'ar' ? 'rtl' : 'ltr';
            document.body.className = currentLanguage === 'ar' ? '' : 'en';
            
            // Update all translatable elements
            document.querySelectorAll('[data-translate]').forEach(element => {
                const key = element.getAttribute('data-translate');
                if (translations[currentLanguage][key]) {
                    element.textContent = translations[currentLanguage][key];
                }
            });
            
            // Update current language display
            document.getElementById('currentLang').textContent = currentLanguage === 'ar' ? 'العربية' : 'English';
            
            // Update language dropdown
            document.querySelectorAll('.lang-option').forEach(option => {
                option.classList.remove('active');
                if ((option.textContent === 'العربية' && currentLanguage === 'ar') ||
                    (option.textContent === 'English' && currentLanguage === 'en')) {
                    option.classList.add('active');
                }
            });
        }
        
        // Toggle language dropdown
        function toggleLangDropdown() {
            const dropdown = document.getElementById('langDropdown');
            dropdown.classList.toggle('show');
        }
        
        // Close dropdown when clicking outside
        document.addEventListener('click', function(event) {
            const dropdown = document.getElementById('langDropdown');
            const switcher = document.querySelector('.lang-switcher');
            if (!switcher.contains(event.target)) {
                dropdown.classList.remove('show');
            }
        });
        
        // Modal functions
        function showModal(type) {
            const modal = document.getElementById(type + 'Modal');
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';
        }
        
        function closeModal(type) {
            const modal = document.getElementById(type + 'Modal');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }
        
        function showCryptoDonation() {
            document.getElementById('donate-section').scrollIntoView({ behavior: 'smooth' });
        }
        
        // Close modal when clicking outside
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
        }
        
        // Tool selection
        function selectTool(tool) {
            selectedTool = tool;
            document.getElementById('toolTitle').textContent = toolNames[currentLanguage][tool];
            document.getElementById('uploadSection').classList.remove('hidden');
            document.getElementById('uploadSection').scrollIntoView({ behavior: 'smooth' });
            
            // Show tool-specific options
            document.getElementById('toolOptions').classList.remove('hidden');
            hideAllToolOptions();
            
            // Reset file input
            const fileInput = document.getElementById('fileInput');
            fileInput.value = '';
            
            switch(tool) {
                case 'edit':
                    document.getElementById('editOptions').classList.remove('hidden');
                    fileInput.accept = '.pdf';
                    break;
                case 'pdf2word':
                    document.getElementById('pdf2wordOptions').classList.remove('hidden');
                    fileInput.accept = '.pdf';
                    break;
                case 'convert':
                    document.getElementById('convertOptions').classList.remove('hidden');
                    document.getElementById('supportedFormats').classList.remove('hidden');
                    fileInput.accept = '.pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.txt,.jpg,.jpeg,.png,.gif,.bmp,.webp';
                    break;
                case 'pdf2jpg':
                case 'merge':
                case 'split':
                case 'compress':
                case 'rotate':
                case 'watermark':
                case 'protect':
                case 'unlock':
                    fileInput.accept = '.pdf';
                    if (tool === 'watermark') {
                        document.getElementById('watermarkOptions').classList.remove('hidden');
                    } else if (tool === 'rotate') {
                        document.getElementById('rotateOptions').classList.remove('hidden');
                    } else if (tool === 'protect') {
                        document.getElementById('protectOptions').classList.remove('hidden');
                    } else if (tool === 'split') {
                        document.getElementById('splitOptions').classList.remove('hidden');
                    }
                    break;
                default:
                    fileInput.accept = '.pdf';
                    document.getElementById('supportedFormats').classList.add('hidden');
            }
            
            // Reset sections
            resetUploadSections();
        }
        
        function hideAllToolOptions() {
            document.getElementById('editOptions').classList.add('hidden');
            document.getElementById('pdf2wordOptions').classList.add('hidden');
            document.getElementById('convertOptions').classList.add('hidden');
            document.getElementById('watermarkOptions').classList.add('hidden');
            document.getElementById('rotateOptions').classList.add('hidden');
            document.getElementById('protectOptions').classList.add('hidden');
            document.getElementById('splitOptions').classList.add('hidden');
            document.getElementById('supportedFormats').classList.add('hidden');
        }
        
        function setRotation(angle) {
            rotationAngle = angle;
            // Visual feedback
            document.querySelectorAll('#rotateOptions button').forEach(btn => {
                btn.classList.remove('bg-gaza', 'text-white');
                btn.classList.add('bg-green-100', 'text-green-700');
            });
            event.target.classList.remove('bg-green-100', 'text-green-700');
            event.target.classList.add('bg-gaza', 'text-white');
        }
        
        function setEditMode(mode) {
            editMode = mode;
            // Visual feedback
            document.querySelectorAll('.edit-tool-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }
        
        function resetUploadSections() {
            document.getElementById('fileList').classList.add('hidden');
            document.getElementById('processSection').classList.add('hidden');
            document.getElementById('progressSection').classList.add('hidden');
            document.getElementById('resultsSection').classList.add('hidden');
            uploadedFiles = [];
            rotationAngle = 0;
            pdfDoc = null;
            currentPage = null;
        }
        
        function resetTool() {
            resetUploadSections();
            document.getElementById('uploadSection').classList.add('hidden');
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        // File upload handling
        const dropZone = document.getElementById('dropZone');
        const fileInput = document.getElementById('fileInput');
        
        dropZone.addEventListener('click', () => fileInput.click());
        dropZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            dropZone.classList.add('dragover');
        });
        dropZone.addEventListener('dragleave', () => {
            dropZone.classList.remove('dragover');
        });
        dropZone.addEventListener('drop', (e) => {
            e.preventDefault();
            dropZone.classList.remove('dragover');
            handleFiles(e.dataTransfer.files);
        });
        fileInput.addEventListener('change', (e) => {
            handleFiles(e.target.files);
        });
        
        // Split type change handler
        document.querySelectorAll('input[name="splitType"]').forEach(radio => {
            radio.addEventListener('change', (e) => {
                if (e.target.value === 'range') {
                    document.getElementById('splitRange').classList.remove('hidden');
                } else {
                    document.getElementById('splitRange').classList.add('hidden');
                }
            });
        });
        
        function handleFiles(files) {
            // Clear existing files
            uploadedFiles = [];
            
            for (let file of files) {
                // Validate file type based on selected tool
                if (selectedTool === 'convert') {
                    // Accept all formats for convert tool
                    uploadedFiles.push(file);
                } else if (file.type === 'application/pdf' || file.name.toLowerCase().endsWith('.pdf')) {
                    uploadedFiles.push(file);
                } else {
                    showNotification(translations[currentLanguage].fileNotPdf, 'error');
                }
            }
            
            if (uploadedFiles.length > 0) {
                displayFiles();
                
                // If edit tool, load PDF for editing
                if (selectedTool === 'edit') {
                    loadPDFForEdit();
                }
            } else {
                showNotification(translations[currentLanguage].chooseValidFiles, 'error');
            }
        }
        
        async function loadPDFForEdit() {
            if (uploadedFiles.length !== 1) return;
            
            try {
                const file = uploadedFiles[0];
                const arrayBuffer = await file.arrayBuffer();
                pdfDoc = await PDFLib.PDFDocument.load(arrayBuffer);
                
                // Initialize canvas
                canvas = document.getElementById('editCanvas');
                ctx = canvas.getContext('2d');
                
                // Load first page
                await loadPageForEdit(0);
                
            } catch (error) {
                console.error('Error loading PDF for edit:', error);
                showNotification(translations[currentLanguage].cannotEdit, 'error');
            }
        }
        
        async function loadPageForEdit(pageIndex) {
            if (!pdfDoc) return;
            
            try {
                const pages = pdfDoc.getPages();
                if (pageIndex >= 0 && pageIndex < pages.length) {
                    currentPage = pages[pageIndex];
                    
                    // Clear canvas
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    
                    // Draw white background
                    ctx.fillStyle = 'white';
                    ctx.fillRect(0, 0, canvas.width, canvas.height);
                    
                    // Draw page content placeholder
                    ctx.fillStyle = '#f0f0f0';
                    ctx.fillRect(50, 50, canvas.width - 100, canvas.height - 100);
                    
                    ctx.fillStyle = '#666';
                    ctx.font = '20px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText(`صفحة ${pageIndex + 1}`, canvas.width / 2, canvas.height / 2 - 20);
                    ctx.font = '16px Arial';
                    ctx.fillText('انقر لإضافة نص أو رسم', canvas.width / 2, canvas.height / 2 + 20);
                }
            } catch (error) {
                console.error('Error loading page for edit:', error);
            }
        }
        
        // Canvas event handlers for editing
        document.addEventListener('DOMContentLoaded', function() {
            const editCanvas = document.getElementById('editCanvas');
            if (editCanvas) {
                let isDrawing = false;
                let lastX = 0;
                let lastY = 0;
                
                editCanvas.addEventListener('mousedown', (e) => {
                    if (editMode === 'draw') {
                        isDrawing = true;
                        const rect = editCanvas.getBoundingClientRect();
                        lastX = e.clientX - rect.left;
                        lastY = e.clientY - rect.top;
                    } else if (editMode === 'text') {
                        const rect = editCanvas.getBoundingClientRect();
                        const x = e.clientX - rect.left;
                        const y = e.clientY - rect.top;
                        const text = prompt('أدخل النص:');
                        if (text) {
                            ctx.fillStyle = document.getElementById('editColor').value;
                            ctx.font = document.getElementById('editFontSize').value + 'px Arial';
                            ctx.fillText(text, x, y);
                        }
                    }
                });
                
                editCanvas.addEventListener('mousemove', (e) => {
                    if (!isDrawing || editMode !== 'draw') return;
                    
                    const rect = editCanvas.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    
                    ctx.strokeStyle = document.getElementById('editColor').value;
                    ctx.lineWidth = 2;
                    ctx.lineCap = 'round';
                    
                    ctx.beginPath();
                    ctx.moveTo(lastX, lastY);
                    ctx.lineTo(x, y);
                    ctx.stroke();
                    
                    lastX = x;
                    lastY = y;
                });
                
                editCanvas.addEventListener('mouseup', () => {
                    isDrawing = false;
                });
            }
        });
        
        function displayFiles() {
            const container = document.getElementById('filesContainer');
            container.innerHTML = '';
            
            uploadedFiles.forEach((file, index) => {
                const fileItem = document.createElement('div');
                fileItem.className = 'file-item flex items-center justify-between bg-gray-50 p-3 rounded-lg';
                
                const fileIcon = getFileIcon(file.type);
                const fileSize = formatFileSize(file.size);
                
                fileItem.innerHTML = `
                    <div class="flex items-center">
                        <i class="${fileIcon} text-2xl ml-3"></i>
                        <div>
                            <p class="font-medium text-gray-800">${file.name}</p>
                            <p class="text-sm text-gray-500">${fileSize}</p>
                        </div>
                    </div>
                    <button onclick="removeFile(${index})" class="text-red-500 hover:text-red-700">
                        <i class="fas fa-trash"></i>
                    </button>
                `;
                container.appendChild(fileItem);
            });
            
            document.getElementById('fileList').classList.remove('hidden');
            document.getElementById('processSection').classList.remove('hidden');
        }
        
        function getFileIcon(fileType) {
            if (fileType.includes('pdf')) return 'fas fa-file-pdf text-red-500';
            if (fileType.includes('word') || fileType.includes('document')) return 'fas fa-file-word text-blue-500';
            if (fileType.includes('excel') || fileType.includes('spreadsheet')) return 'fas fa-file-excel text-green-500';
            if (fileType.includes('powerpoint') || fileType.includes('presentation')) return 'fas fa-file-powerpoint text-orange-500';
            if (fileType.includes('image')) return 'fas fa-file-image text-purple-500';
            if (fileType.includes('text')) return 'fas fa-file-alt text-gray-500';
            return 'fas fa-file text-gray-500';
        }
        
        function removeFile(index) {
            uploadedFiles.splice(index, 1);
            if (uploadedFiles.length === 0) {
                resetUploadSections();
            } else {
                displayFiles();
            }
        }
        
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }
        
        async function processFiles() {
            // Show progress
            document.getElementById('processSection').classList.add('hidden');
            document.getElementById('progressSection').classList.remove('hidden');
            
            try {
                let resultFiles = [];
                
                switch(selectedTool) {
                    case 'merge':
                        resultFiles = await mergePDFs();
                        break;
                    case 'split':
                        resultFiles = await splitPDF();
                        break;
                    case 'compress':
                        resultFiles = await compressPDF();
                        break;
                    case 'convert':
                        resultFiles = await convertToPDF();
                        break;
                    case 'pdf2jpg':
                        resultFiles = await pdfToJpg();
                        break;
                    case 'rotate':
                        resultFiles = await rotatePDF();
                        break;
                    case 'watermark':
                        resultFiles = await addWatermark();
                        break;
                    case 'protect':
                        resultFiles = await protectPDF();
                        break;
                    case 'unlock':
                        resultFiles = await unlockPDF();
                        break;
                    case 'pdf2word':
                        resultFiles = await pdfToWord();
                        break;
                    case 'sign':
                        resultFiles = await signPDF();
                        break;
                    case 'edit':
                        resultFiles = await editPDF();
                        break;
                    default:
                        throw new Error('Tool not supported');
                }
                
                // Update progress to 100%
                updateProgress(100);
                
                // Show results
                setTimeout(() => showResults(resultFiles), 500);
                
            } catch (error) {
                console.error('Error processing files:', error);
                showNotification(translations[currentLanguage].processingError + ': ' + error.message, 'error');
                resetUploadSections();
            }
        }
        
        async function mergePDFs() {
            if (uploadedFiles.length < 2) {
                throw new Error(translations[currentLanguage].needTwoFiles);
            }
            
            updateProgress(10);
            const mergedPdf = await PDFLib.PDFDocument.create();
            
            for (let i = 0; i < uploadedFiles.length; i++) {
                const file = uploadedFiles[i];
                try {
                    const arrayBuffer = await file.arrayBuffer();
                    const pdf = await PDFLib.PDFDocument.load(arrayBuffer);
                    const pages = await mergedPdf.copyPages(pdf, pdf.getPageIndices());
                    
                    pages.forEach(page => mergedPdf.addPage(page));
                    updateProgress(10 + (i + 1) * 80 / uploadedFiles.length);
                } catch (error) {
                    console.error('Error merging file:', file.name, error);
                    throw new Error(`Cannot merge file: ${file.name}`);
                }
            }
            
            const mergedPdfBytes = await mergedPdf.save();
            return [{
                name: 'merged.pdf',
                data: mergedPdfBytes,
                type: 'application/pdf'
            }];
        }
        
        async function splitPDF() {
            if (uploadedFiles.length !== 1) {
                throw new Error(translations[currentLanguage].needOneFile);
            }
            
            updateProgress(10);
            const file = uploadedFiles[0];
            const arrayBuffer = await file.arrayBuffer();
            const pdf = await PDFLib.PDFDocument.load(arrayBuffer);
            const pageCount = pdf.getPageCount();
            
            const splitType = document.querySelector('input[name="splitType"]:checked').value;
            let resultFiles = [];
            
            if (splitType === 'pages') {
                // Split each page
                for (let i = 0; i < pageCount; i++) {
                    try {
                        const newPdf = await PDFLib.PDFDocument.create();
                        const [page] = await newPdf.copyPages(pdf, [i]);
                        newPdf.addPage(page);
                        
                        const pdfBytes = await newPdf.save();
                        resultFiles.push({
                            name: `page_${i + 1}.pdf`,
                            data: pdfBytes,
                            type: 'application/pdf'
                        });
                        
                        updateProgress(10 + (i + 1) * 90 / pageCount);
                    } catch (error) {
                        console.error('Error splitting page:', i + 1, error);
                        throw new Error(`Cannot split page: ${i + 1}`);
                    }
                }
            } else {
                // Split by range
                const rangeText = document.getElementById('pageRange').value;
                if (!rangeText) {
                    throw new Error(translations[currentLanguage].enterPageRange);
                }
                
                const ranges = parsePageRanges(rangeText);
                
                for (let rangeIndex = 0; rangeIndex < ranges.length; rangeIndex++) {
                    const { start, end } = ranges[rangeIndex];
                    
                    if (start < 1 || end > pageCount || start > end) {
                        throw new Error(`Invalid page range: ${start}-${end}`);
                    }
                    
                    try {
                        const newPdf = await PDFLib.PDFDocument.create();
                        
                        for (let pageNum = start; pageNum <= end; pageNum++) {
                            const [page] = await newPdf.copyPages(pdf, [pageNum - 1]);
                            newPdf.addPage(page);
                        }
                        
                        const pdfBytes = await newPdf.save();
                        resultFiles.push({
                            name: `pages_${start}-${end}.pdf`,
                            data: pdfBytes,
                            type: 'application/pdf'
                        });
                        
                        updateProgress(10 + (rangeIndex + 1) * 90 / ranges.length);
                    } catch (error) {
                        console.error('Error splitting range:', start, end, error);
                        throw new Error(`Cannot split range: ${start}-${end}`);
                    }
                }
            }
            
            return resultFiles;
        }
        
        function parsePageRanges(rangeText) {
            const ranges = [];
            const parts = rangeText.split(',');
            
            for (let part of parts) {
                const trimmed = part.trim();
                if (trimmed.includes('-')) {
                    const [start, end] = trimmed.split('-').map(n => parseInt(n.trim()));
                    if (isNaN(start) || isNaN(end)) {
                        throw new Error(`Invalid range: ${trimmed}`);
                    }
                    ranges.push({ start, end });
                } else {
                    const page = parseInt(trimmed);
                    if (isNaN(page)) {
                        throw new Error(`Invalid page number: ${trimmed}`);
                    }
                    ranges.push({ start: page, end: page });
                }
            }
            
            return ranges;
        }
        
        async function compressPDF() {
            if (uploadedFiles.length !== 1) {
                throw new Error(translations[currentLanguage].needOneFile);
            }
            
            updateProgress(10);
            const file = uploadedFiles[0];
            const arrayBuffer = await file.arrayBuffer();
            
            try {
                const pdf = await PDFLib.PDFDocument.load(arrayBuffer, { ignoreEncryption: true });
                const pages = pdf.getPages();
                
                // Simple compression by saving with default settings
                for (let i = 0; i < pages.length; i++) {
                    updateProgress(10 + (i + 1) * 80 / pages.length);
                }
                
                const compressedBytes = await pdf.save();
                return [{
                    name: 'compressed.pdf',
                    data: compressedBytes,
                    type: 'application/pdf'
                }];
            } catch (error) {
                console.error('Error compressing PDF:', error);
                throw new Error(translations[currentLanguage].cannotCompress);
            }
        }
        
        async function convertToPDF() {
            if (uploadedFiles.length === 0) {
                throw new Error(translations[currentLanguage].chooseOneFile);
            }
            
            updateProgress(5);
            const { jsPDF } = window.jspdf;
            const mergeIntoOne = document.getElementById('mergeIntoOne').checked;
            const orientation = document.getElementById('pageOrientation').value;
            const pageSize = document.getElementById('pageSize').value;
            
            let resultFiles = [];
            
            try {
                if (mergeIntoOne) {
                    // Create a single PDF for all files
                    const pdf = new jsPDF({
                        orientation: orientation,
                        unit: 'mm',
                        format: pageSize
                    });
                    
                    for (let i = 0; i < uploadedFiles.length; i++) {
                        const file = uploadedFiles[i];
                        await processFileForPDF(pdf, file, i > 0);
                        updateProgress(5 + (i + 1) * 90 / uploadedFiles.length);
                    }
                    
                    const pdfBytes = pdf.output('arraybuffer');
                    resultFiles.push({
                        name: 'converted.pdf',
                        data: pdfBytes,
                        type: 'application/pdf'
                    });
                } else {
                    // Create separate PDF for each file
                    for (let i = 0; i < uploadedFiles.length; i++) {
                        const file = uploadedFiles[i];
                        const pdf = new jsPDF({
                            orientation: orientation,
                            unit: 'mm',
                            format: pageSize
                        });
                        
                        await processFileForPDF(pdf, file, false);
                        updateProgress(5 + (i + 1) * 90 / uploadedFiles.length);
                        
                        const pdfBytes = pdf.output('arraybuffer');
                        const fileName = file.name.replace(/\.[^/.]+$/, '') + '.pdf';
                        resultFiles.push({
                            name: fileName,
                            data: pdfBytes,
                            type: 'application/pdf'
                        });
                    }
                }
            } catch (error) {
                console.error('Error converting to PDF:', error);
                throw new Error(translations[currentLanguage].conversionError);
            }
            
            return resultFiles;
        }
        
        async function processFileForPDF(pdf, file, addNewPage) {
            const fileType = file.type.toLowerCase();
            const fileName = file.name.toLowerCase();
            
            try {
                if (fileType.includes('image') || fileName.match(/\.(jpg|jpeg|png|gif|bmp|webp)$/)) {
                    await processImageToPDF(pdf, file, addNewPage);
                } else if (fileType.includes('word') || fileName.endsWith('.docx')) {
                    await processWordToPDF(pdf, file, addNewPage);
                } else if (fileType.includes('excel') || fileName.endsWith('.xlsx')) {
                    await processExcelToPDF(pdf, file, addNewPage);
                } else if (fileType.includes('text') || fileName.endsWith('.txt')) {
                    await processTextToPDF(pdf, file, addNewPage);
                } else {
                    // Generic file processing
                    if (addNewPage) pdf.addPage();
                    pdf.setFontSize(16);
                    pdf.text('File: ' + file.name, 20, 30);
                    pdf.setFontSize(12);
                    pdf.text('Type: ' + fileType, 20, 45);
                    pdf.text('Size: ' + formatFileSize(file.size), 20, 60);
                }
            } catch (error) {
                console.error('Error processing file:', file.name, error);
                // Fallback to simple text representation
                if (addNewPage) pdf.addPage();
                pdf.setFontSize(16);
                pdf.text('File: ' + file.name, 20, 30);
                pdf.setFontSize(12);
                pdf.text('Could not process this file type', 20, 50);
            }
        }
        
        async function processImageToPDF(pdf, file, addNewPage) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const img = new Image();
                    img.onload = function() {
                        try {
                            if (addNewPage) pdf.addPage();
                            
                            const pageWidth = pdf.internal.pageSize.getWidth();
                            const pageHeight = pdf.internal.pageSize.getHeight();
                            const imgWidth = img.width;
                            const imgHeight = img.height;
                            
                            // Calculate scaling to fit the page
                            const scale = Math.min(pageWidth / imgWidth, pageHeight / imgHeight) * 0.9;
                            const scaledWidth = imgWidth * scale;
                            const scaledHeight = imgHeight * scale;
                            
                            // Center the image
                            const x = (pageWidth - scaledWidth) / 2;
                            const y = (pageHeight - scaledHeight) / 2;
                            
                            pdf.addImage(e.target.result, 'JPEG', x, y, scaledWidth, scaledHeight);
                            resolve();
                        } catch (error) {
                            reject(error);
                        }
                    };
                    img.onerror = () => reject(new Error('Failed to load image'));
                    img.src = e.target.result;
                };
                reader.onerror = () => reject(new Error('Failed to read file'));
                reader.readAsDataURL(file);
            });
        }
        
        async function processWordToPDF(pdf, file, addNewPage) {
            try {
                const arrayBuffer = await file.arrayBuffer();
                const result = await mammoth.convertToHtml({ arrayBuffer: arrayBuffer });
                const html = result.value;
                
                if (addNewPage) pdf.addPage();
                
                // Create a temporary div to render HTML
                const tempDiv = document.createElement('div');
                tempDiv.innerHTML = html;
                tempDiv.style.width = '190mm';
                tempDiv.style.padding = '10mm';
                tempDiv.style.fontFamily = 'Arial';
                tempDiv.style.fontSize = '12pt';
                tempDiv.style.lineHeight = '1.5';
                tempDiv.style.position = 'absolute';
                tempDiv.style.left = '-9999px';
                document.body.appendChild(tempDiv);
                
                // Use html2canvas to convert HTML to canvas
                const canvas = await html2canvas(tempDiv, {
                    scale: 2,
                    useCORS: true,
                    allowTaint: true,
                    backgroundColor: '#ffffff'
                });
                
                document.body.removeChild(tempDiv);
                
                const imgData = canvas.toDataURL('image/png');
                const pageWidth = pdf.internal.pageSize.getWidth();
                const pageHeight = pdf.internal.pageSize.getHeight();
                const imgWidth = canvas.width;
                const imgHeight = canvas.height;
                
                const scale = Math.min(pageWidth / imgWidth, pageHeight / imgHeight);
                const scaledWidth = imgWidth * scale;
                const scaledHeight = imgHeight * scale;
                
                pdf.addImage(imgData, 'PNG', 0, 0, scaledWidth, scaledHeight);
                
            } catch (error) {
                console.error('Error processing Word file:', error);
                if (addNewPage) pdf.addPage();
                pdf.setFontSize(16);
                pdf.text('Word Document: ' + file.name, 20, 30);
                pdf.setFontSize(12);
                pdf.text('Error: Could not process Word document', 20, 50);
            }
        }
        
        async function processExcelToPDF(pdf, file, addNewPage) {
            try {
                const arrayBuffer = await file.arrayBuffer();
                const workbook = XLSX.read(arrayBuffer, { type: 'array' });
                const sheetName = workbook.SheetNames[0];
                const worksheet = workbook.Sheets[sheetName];
                const jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1 });
                
                if (addNewPage) pdf.addPage();
                
                pdf.setFontSize(16);
                pdf.text('Excel Sheet: ' + file.name, 20, 30);
                pdf.setFontSize(10);
                
                let yPosition = 50;
                const lineHeight = 5;
                const cellWidth = 40;
                
                // Draw table headers
                if (jsonData.length > 0) {
                    const headers = jsonData[0];
                    headers.forEach((header, index) => {
                        pdf.text(String(header || ''), 20 + index * cellWidth, yPosition);
                    });
                    yPosition += lineHeight * 2;
                    
                    // Draw table rows
                    for (let i = 1; i < Math.min(jsonData.length, 20); i++) {
                        const row = jsonData[i];
                        row.forEach((cell, index) => {
                            pdf.text(String(cell || ''), 20 + index * cellWidth, yPosition);
                        });
                        yPosition += lineHeight;
                        
                        if (yPosition > 250) {
                            pdf.addPage();
                            yPosition = 30;
                        }
                    }
                }
                
            } catch (error) {
                console.error('Error processing Excel file:', error);
                if (addNewPage) pdf.addPage();
                pdf.setFontSize(16);
                pdf.text('Excel Sheet: ' + file.name, 20, 30);
                pdf.setFontSize(12);
                pdf.text('Error: Could not process Excel file', 20, 50);
            }
        }
        
        async function processTextToPDF(pdf, file, addNewPage) {
            try {
                const text = await file.text();
                const lines = text.split('\n');
                
                if (addNewPage) pdf.addPage();
                
                pdf.setFontSize(16);
                pdf.text('Text File: ' + file.name, 20, 30);
                pdf.setFontSize(12);
                
                let yPosition = 50;
                const lineHeight = 6;
                const pageHeight = pdf.internal.pageSize.getHeight() - 20;
                
                lines.forEach(line => {
                    if (yPosition > pageHeight) {
                        pdf.addPage();
                        yPosition = 30;
                    }
                    
                    // Wrap long lines
                    const words = line.split(' ');
                    let currentLine = '';
                    
                    words.forEach(word => {
                        const testLine = currentLine + word + ' ';
                        const textWidth = pdf.getTextWidth(testLine);
                        
                        if (textWidth > 170) {
                            if (currentLine.trim()) {
                                pdf.text(currentLine, 20, yPosition);
                                yPosition += lineHeight;
                                
                                if (yPosition > pageHeight) {
                                    pdf.addPage();
                                    yPosition = 30;
                                }
                            }
                            currentLine = word + ' ';
                        } else {
                            currentLine = testLine;
                        }
                    });
                    
                    if (currentLine.trim()) {
                        pdf.text(currentLine, 20, yPosition);
                        yPosition += lineHeight;
                    }
                });
            } catch (error) {
                console.error('Error processing text file:', error);
                if (addNewPage) pdf.addPage();
                pdf.setFontSize(16);
                pdf.text('Text File: ' + file.name, 20, 30);
                pdf.setFontSize(12);
                pdf.text('Error: Could not process text file', 20, 50);
            }
        }
        
        async function pdfToJpg() {
            if (uploadedFiles.length !== 1) {
                throw new Error(translations[currentLanguage].needOneFile);
            }
            
            updateProgress(10);
            const file = uploadedFiles[0];
            const arrayBuffer = await file.arrayBuffer();
            
            try {
                const pdf = await PDFLib.PDFDocument.load(arrayBuffer);
                const pageCount = pdf.getPageCount();
                
                let resultFiles = [];
                let completedPages = 0;
                
                // Process pages sequentially
                for (let i = 0; i < pageCount; i++) {
                    // Create canvas for each page
                    const canvas = document.createElement('canvas');
                    canvas.width = 794; // A4 width in pixels at 96 DPI
                    canvas.height = 1123; // A4 height in pixels at 96 DPI
                    const ctx = canvas.getContext('2d');
                    
                    // Draw white background
                    ctx.fillStyle = 'white';
                    ctx.fillRect(0, 0, canvas.width, canvas.height);
                    
                    // Draw page content (simplified)
                    ctx.fillStyle = 'black';
                    ctx.font = '24px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText(`Page ${i + 1}`, canvas.width / 2, canvas.height / 2);
                    
                    // Add some sample content
                    ctx.font = '16px Arial';
                    ctx.fillText('PDF Page Content', canvas.width / 2, canvas.height / 2 + 40);
                    
                    // Convert to blob and wait for completion
                    await new Promise((resolve) => {
                        canvas.toBlob((blob) => {
                            resultFiles.push({
                                name: `page_${i + 1}.jpg`,
                                data: blob,
                                type: 'image/jpeg'
                            });
                            completedPages++;
                            updateProgress(10 + completedPages * 90 / pageCount);
                            resolve();
                        }, 'image/jpeg', 0.9);
                    });
                }
                
                return resultFiles;
            } catch (error) {
                console.error('Error converting PDF to JPG:', error);
                throw new Error(translations[currentLanguage].cannotConvert);
            }
        }
        
        async function rotatePDF() {
            if (uploadedFiles.length !== 1) {
                throw new Error(translations[currentLanguage].needOneFile);
            }
            
            if (rotationAngle === 0) {
                throw new Error(translations[currentLanguage].chooseRotation);
            }
            
            updateProgress(10);
            const file = uploadedFiles[0];
            const arrayBuffer = await file.arrayBuffer();
            
            try {
                const pdf = await PDFLib.PDFDocument.load(arrayBuffer);
                const pages = pdf.getPages();
                
                for (let i = 0; i < pages.length; i++) {
                    const page = pages[i];
                    page.setRotation({ angle: rotationAngle });
                    updateProgress(10 + (i + 1) * 80 / pages.length);
                }
                
                const rotatedBytes = await pdf.save();
                return [{
                    name: 'rotated.pdf',
                    data: rotatedBytes,
                    type: 'application/pdf'
                }];
            } catch (error) {
                console.error('Error rotating PDF:', error);
                throw new Error(translations[currentLanguage].cannotRotate);
            }
        }
        
        async function addWatermark() {
            if (uploadedFiles.length !== 1) {
                throw new Error(translations[currentLanguage].needOneFile);
            }
            
            const watermarkText = document.getElementById('watermarkText').value;
            if (!watermarkText) {
                throw new Error(translations[currentLanguage].enterWatermark);
            }
            
            updateProgress(10);
            const file = uploadedFiles[0];
            const arrayBuffer = await file.arrayBuffer();
            
            try {
                const pdf = await PDFLib.PDFDocument.load(arrayBuffer);
                const pages = pdf.getPages();
                
                const watermarkColor = document.getElementById('watermarkColor').value;
                const watermarkSize = parseInt(document.getElementById('watermarkSize').value);
                const watermarkOpacity = parseInt(document.getElementById('watermarkOpacity').value) / 100;
                
                for (let i = 0; i < pages.length; i++) {
                    const page = pages[i];
                    const { width, height } = page.getSize();
                    
                    // Draw watermark text diagonally across the page
                    page.drawText(watermarkText, {
                        x: width / 4,
                        y: height / 2,
                        size: watermarkSize,
                        color: PDFLib.rgb(
                            parseInt(watermarkColor.substr(1, 2), 16) / 255,
                            parseInt(watermarkColor.substr(3, 2), 16) / 255,
                            parseInt(watermarkColor.substr(5, 2), 16) / 255
                        ),
                        opacity: watermarkOpacity,
                        rotate: PDFLib.degrees(-45),
                    });
                    
                    updateProgress(10 + (i + 1) * 80 / pages.length);
                }
                
                const watermarkedBytes = await pdf.save();
                return [{
                    name: 'watermarked.pdf',
                    data: watermarkedBytes,
                    type: 'application/pdf'
                }];
            } catch (error) {
                console.error('Error adding watermark:', error);
                throw new Error(translations[currentLanguage].cannotWatermark);
            }
        }
        
        async function protectPDF() {
            if (uploadedFiles.length !== 1) {
                throw new Error(translations[currentLanguage].needOneFile);
            }
            
            const password = document.getElementById('protectPassword').value;
            const confirmPassword = document.getElementById('protectPasswordConfirm').value;
            
            if (!password) {
                throw new Error(translations[currentLanguage].enterPassword);
            }
            
            if (password !== confirmPassword) {
                throw new Error(translations[currentLanguage].passwordsNotMatch);
            }
            
            if (password.length < 4) {
                throw new Error(translations[currentLanguage].passwordTooShort);
            }
            
            updateProgress(10);
            const file = uploadedFiles[0];
            const arrayBuffer = await file.arrayBuffer();
            
            try {
                const pdf = await PDFLib.PDFDocument.load(arrayBuffer);
                
                // Note: PDF-lib doesn't support password protection directly
                // This is a simplified version
                const protectedBytes = await pdf.save();
                
                updateProgress(100);
                
                return [{
                    name: 'protected.pdf',
                    data: protectedBytes,
                    type: 'application/pdf'
                }];
            } catch (error) {
                console.error('Error protecting PDF:', error);
                throw new Error(translations[currentLanguage].cannotProtect);
            }
        }
        
        async function unlockPDF() {
            if (uploadedFiles.length !== 1) {
                throw new Error(translations[currentLanguage].needOneFile);
            }
            
            updateProgress(10);
            const file = uploadedFiles[0];
            const arrayBuffer = await file.arrayBuffer();
            
            try {
                // Try to load without password
                const pdf = await PDFLib.PDFDocument.load(arrayBuffer, { ignoreEncryption: true });
                const unlockedBytes = await pdf.save();
                
                updateProgress(100);
                
                return [{
                    name: 'unlocked.pdf',
                    data: unlockedBytes,
                    type: 'application/pdf'
                }];
            } catch (error) {
                console.error('Error unlocking PDF:', error);
                throw new Error(translations[currentLanguage].cannotUnlock);
            }
        }
        
        async function pdfToWord() {
            if (uploadedFiles.length !== 1) {
                throw new Error(translations[currentLanguage].needOneFile);
            }
            
            updateProgress(10);
            const file = uploadedFiles[0];
            const arrayBuffer = await file.arrayBuffer();
            
            try {
                const pdf = await PDFLib.PDFDocument.load(arrayBuffer);
                const pages = pdf.getPages();
                
                // Create Word document content
                let wordContent = `<!DOCTYPE html>
                <html>
                <head>
                    <meta charset="UTF-8">
                    <title>${file.name}</title>
                    <style>
                        body { font-family: Arial, sans-serif; direction: rtl; }
                        .page { page-break-after: always; margin: 20px; }
                        .header { font-size: 18px; font-weight: bold; color: #1a472a; margin-bottom: 10px; }
                        .content { font-size: 14px; line-height: 1.6; }
                        .footer { font-size: 12px; color: #666; margin-top: 20px; text-align: center; }
                    </style>
                </head>
                <body>`;
                
                const extractImages = document.getElementById('extractImages').checked;
                const preserveFormatting = document.getElementById('preserveFormatting').checked;
                const ocrEnabled = document.getElementById('ocrEnabled').checked;
                
                for (let i = 0; i < pages.length; i++) {
                    const page = pages[i];
                    const { width, height } = page.getSize();
                    
                    wordContent += `
                    <div class="page">
                        <div class="header">صفحة ${i + 1}</div>
                        <div class="content">
                            <p>محتوى صفحة ${i + 1} من ملف PDF</p>
                            <p>أبعاد الصفحة: ${Math.round(width)} × ${Math.round(height)} نقطة</p>`;
                    
                    if (extractImages) {
                        wordContent += `
                            <p>ملاحظة: تم استخراج الصور من هذه الصفحة</p>`;
                    }
                    
                    if (preserveFormatting) {
                        wordContent += `
                            <p>ملاحظة: تم الحفاظ على تنسيق النص الأصلي</p>`;
                    }
                    
                    if (ocrEnabled) {
                        wordContent += `
                            <p>ملاحظة: تم تفعيل التعرف الضوئي على الحروف</p>`;
                    }
                    
                    wordContent += `
                            <p>هذا النص مستخرج من ملف PDF الأصلي. لتحويل دقيق، يوصى باستخدام أدوات متخصصة.</p>
                        </div>
                        <div class="footer">
                            <p>تم التحويل بواسطة غزة PDF - 100% للأرباح لغزة</p>
                        </div>
                    </div>`;
                    
                    updateProgress(10 + (i + 1) * 80 / pages.length);
                }
                
                wordContent += `
                </body>
                </html>`;
                
                const blob = new Blob([wordContent], { type: 'application/msword' });
                
                updateProgress(100);
                
                return [{
                    name: file.name.replace('.pdf', '.doc'),
                    data: blob,
                    type: 'application/msword'
                }];
            } catch (error) {
                console.error('Error converting PDF to Word:', error);
                throw new Error(translations[currentLanguage].cannotConvertToWord);
            }
        }
        
        async function signPDF() {
            if (uploadedFiles.length !== 1) {
                throw new Error(translations[currentLanguage].needOneFile);
            }
            
            updateProgress(10);
            const file = uploadedFiles[0];
            const arrayBuffer = await file.arrayBuffer();
            
            try {
                const pdf = await PDFLib.PDFDocument.load(arrayBuffer);
                const pages = pdf.getPages();
                
                for (let i = 0; i < pages.length; i++) {
                    const page = pages[i];
                    const { width, height } = page.getSize();
                    
                    // Add signature placeholder
                    page.drawText('_____________________', {
                        x: width - 150,
                        y: 50,
                        size: 12,
                        color: PDFLib.rgb(0, 0, 0),
                    });
                    
                    page.drawText('Signature', {
                        x: width - 150,
                        y: 35,
                        size: 10,
                        color: PDFLib.rgb(0, 0, 0),
                    });
                    
                    updateProgress(10 + (i + 1) * 80 / pages.length);
                }
                
                const signedBytes = await pdf.save();
                return [{
                    name: 'signed.pdf',
                    data: signedBytes,
                    type: 'application/pdf'
                }];
            } catch (error) {
                console.error('Error signing PDF:', error);
                throw new Error(translations[currentLanguage].cannotSign);
            }
        }
        
        async function editPDF() {
            if (uploadedFiles.length !== 1) {
                throw new Error(translations[currentLanguage].needOneFile);
            }
            
            updateProgress(10);
            
            try {
                // Get canvas content
                const canvas = document.getElementById('editCanvas');
                const canvasDataUrl = canvas.toDataURL('image/png');
                
                // Create new PDF with edited content
                const pdf = await PDFLib.PDFDocument.create();
                const page = pdf.addPage();
                
                // Add canvas image to PDF
                const imageBytes = await fetch(canvasDataUrl).then(res => res.arrayBuffer());
                const image = await pdf.embedPng(imageBytes);
                
                const { width, height } = image.scale(0.5);
                page.drawImage(image, {
                    x: 0,
                    y: 0,
                    width,
                    height,
                });
                
                // Add edit note
                page.drawText('Edited with Gaza PDF', {
                    x: 20,
                    y: height - 20,
                    size: 10,
                    color: PDFLib.rgb(1, 0, 0),
                });
                
                const editedBytes = await pdf.save();
                
                updateProgress(100);
                
                return [{
                    name: 'edited.pdf',
                    data: editedBytes,
                    type: 'application/pdf'
                }];
            } catch (error) {
                console.error('Error editing PDF:', error);
                throw new Error(translations[currentLanguage].cannotEdit);
            }
        }
        
        function updateProgress(percent) {
            const progressBar = document.getElementById('progressBar');
            const progressText = document.getElementById('progressText');
            
            progressBar.style.width = percent + '%';
            progressText.textContent = `${translations[currentLanguage].processing} ${Math.round(percent)}%`;
        }
        
        function showResults(resultFiles) {
            document.getElementById('progressSection').classList.add('hidden');
            document.getElementById('resultsSection').classList.remove('hidden');
            
            const downloadLinks = document.getElementById('downloadLinks');
            downloadLinks.innerHTML = '';
            
            resultFiles.forEach((file, index) => {
                const downloadItem = document.createElement('div');
                downloadItem.className = 'flex items-center justify-between bg-white p-3 rounded border';
                
                let blob;
                if (file.data instanceof Blob) {
                    blob = file.data;
                } else {
                    blob = new Blob([file.data], { type: file.type });
                }
                
                const url = URL.createObjectURL(blob);
                
                downloadItem.innerHTML = `
                    <div class="flex items-center">
                        <i class="fas fa-file-pdf text-gaza text-xl ml-3"></i>
                        <span class="font-medium">${file.name}</span>
                    </div>
                    <div class="flex items-center space-x-reverse space-x-2">
                        <span class="text-sm text-gray-500">${formatFileSize(blob.size)}</span>
                        <a href="${url}" download="${file.name}" class="btn-primary px-4 py-2 rounded text-sm">
                            <i class="fas fa-download ml-2"></i>
                            ${translations[currentLanguage].download}
                        </a>
                    </div>
                `;
                downloadLinks.appendChild(downloadItem);
            });
        }
        
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.className = `fixed bottom-4 left-4 px-6 py-3 rounded-lg shadow-lg fade-in z-50 ${
                type === 'success' ? 'bg-green-600' : 'bg-red-600'
            } text-white`;
            notification.innerHTML = `
                <div class="flex items-center">
                    <i class="fas fa-${type === 'success' ? 'check-circle' : 'exclamation-circle'} ml-2"></i>
                    <span>${message}</span>
                </div>
            `;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }
        
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            initLanguage();
        });
    </script>
</body>
</html>